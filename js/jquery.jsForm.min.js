/*!
 * jQuery.jsForm v1.5.0 | (c) 2015 Niko Berger http://www.gargan.org/
 * Usage: https://github.com/corinis/jsForm
 */

!function(c, s, l) {
    "use strict";
    var n = {}, r = {};
    function i(t, e) {
        var a = c(t);
        this.options = c.extend({}, {
            controls: !0,
            data: null,
            prefix: "data",
            trackChanges: "changed",
            validateHidden: !0,
            skipEmpty: !1,
            renderer: null,
            processors: null,
            dataHandler: null,
            connect: null,
            viewClass: "jsfValue"
        }, e), !a.attr("data-prefix") || "data" !== this.options.prefix && "" !== this.options.prefix || "" !== a.attr("data-prefix") && (this.options.prefix = a.attr("data-prefix")), 
        this.element = t, this._init();
    }
    i.prototype._init = function() {
        if (this._domInit(), this.options.controls) if (c.jsFormControls) c.each(this._getForm(), function() {
            c(this).jsFormControls();
        }); else try {
            "undefined" != typeof console && this._debug("jquery.JsForm.controls not available!");
        } catch (t) {}
        this._fill();
    }, i.prototype.connect = function(t) {
        this._initCollection(t, this.options.prefix), this._initConditional(t, this.options.prefix, this.options), 
        this.options.controls && c.jsFormControls && c(t).jsFormControls(), this._fillDom(t), 
        this.options.connect || (this.options.connect = []), this.options.connect.push(t);
    }, i.prototype.getNodes = function() {
        return this._getForm();
    }, i.prototype._domInit = function() {
        var t = this;
        c.each(this._getForm(), function() {
            t._initCollection(this, t.options.prefix), t._initConditional(this, t.options.prefix, t.options);
        });
    }, i.prototype._debug = function(t, e) {
        try {
            var a = console || (s ? s.console : null);
            if (!a || !a.log) return;
            var i = null;
            i = (i = c.isPlainObject(e) ? JSON.stringify(e, null, " ") : e) || "", a.log(t + i);
        } catch (t) {}
    }, i.prototype._initConditional = function(t, e, a) {
        function i(t, e, a) {
            var i = !1;
            c.each(a, function() {
                var t = n._getValueWithArrays(e, this);
                if ((!c(n).data().condition || t === c(n).data().condition) && t && "" !== t && 0 !== t && -1 !== t) return !(i = !0);
            }), i ? t.show() : t.hide();
        }
        function s(t, e, a) {
            var i = !1;
            c.each(a, function() {
                var t = n._getValueWithArrays(e, this);
                if ((!c(n).data().condition || t === c(n).data().condition) && t && "" !== t && 0 !== t && -1 !== t) return !(i = !0);
            }), i ? t.hide() : t.show();
        }
        var n = this;
        this.conditionals = c(t).find(".conditional"), this.conditionals.each(function() {
            c(this).data().conditionalEval = [];
            var t = c(this).attr("data-show");
            t && 0 < t.length && c(this).data().conditionalEval.push({
                func: i,
                field: t.split(" ")
            }), (t = c(this).attr("data-hide")) && 0 < t.length && c(this).data().conditionalEval.push({
                func: s,
                field: t.split(" ")
            }), (t = c(this).attr("data-eval")) && 0 < t.length && a.conditionals[t] && c(this).data().conditionalEval.push({
                func: a.conditionals[t]
            });
        });
    }, i.prototype._evaluateConditionals = function(t, e) {
        this.conditionals.each(function() {
            var t = c(this);
            c.each(t.data().conditionalEval, function() {
                this.func(t, e, this.field);
            });
        });
    }, i.prototype._initCollection = function(t, s) {
        var n = {}, r = this;
        c(t).data().collections = n, c(".collection", t).each(function() {
            var a, t, e = c(this).attr("data-field");
            e && 0 === e.indexOf(s + ".") && (a = c(this), (t = n[e]) ? t.push(a) : n[e] = [ a ], 
            r._initList(a), !a.hasClass("ui-sortable") && a.hasClass("sortable") && a.sortable && (e = (e = a.attr("data-sortable")) ? JSON.parse(e) : {}, 
            a.sortable(e), a.on("sortstop", function(t, e) {
                r._reorder(a);
            })), c(this).on("add", function(t, e, a) {
                var i, s = c(this).attr("data-field");
                a && s != a || (e = e || {}, (a = c(this).data("template")) && (a = a.clone(!0), 
                c(a).addClass("POJO"), c(a).data().pojo = e, (e = (e = c(this).data("prefill")) || c(this).val("data-prefill")) && (c.isFunction(e) ? e(c(a).data().pojo, c(a)) : e.substring ? c(a).data().pojo = JSON.parse(e) : c.isPlainObject(e) && (c(a).data().pojo = e)), 
                r._enableTracking(c("input,textarea,select", a)), r.options.trackChanges && c("input,textarea,select", a).addClass(r.options.trackChanges), 
                r._addCollectionControls(a), r._initCollection(a, s.substring(s.indexOf(".") + 1)), 
                c(this).trigger("addCollection", [ a, c(a).data().pojo ]), i = c(this).children(".POJO").length, 
                c(a).on("refresh", function() {
                    r._fillFieldData(c(this), c(this).data().pojo, s.substring(s.indexOf(".") + 1), i), 
                    r._fillData(c(this), c(this).data().pojo, s.substring(s.indexOf(".") + 1), i);
                }).trigger("refresh"), c(this).append(a), c(this).trigger("postAddCollection", [ a, c(a).data().pojo ])));
            }));
        }), c(".add", t).each(function() {
            var e = c(this).attr("data-field");
            e && 0 === e.indexOf(s + ".") && (c(this).data().collections = n[e], c(this).data().hasJsForm || (c(this).data().hasJsForm = !0, 
            c(this).click(function(t) {
                t.preventDefault(), c.each(c(this).data("collections"), function() {
                    c(this).trigger("add", [ null, e ]);
                });
            })));
        }), c(".insert", t).each(function() {
            var i = c(this).attr("data-field");
            i && 0 === i.indexOf(s + ".") && (c(this).data().isCollection || (c(this).data().isCollection = !0, 
            c(this).data("collections", n[c(this).attr("data-field")]), c(this).on("insert", function(t, a) {
                var e;
                (a = a || c(this).data().pojo) && ((e = c(this).data("beforeInsert")) && c.isFunction(e) && !(a = e(a)) || (c.each(c(this).data("collections"), function() {
                    var t, e = c(this).data("template");
                    e && ((e = e.clone(!0)).addClass("POJO"), e.data().pojo = a, r._addCollectionControls(e), 
                    r._initCollection(e), c(this).trigger("addCollection", [ e, a ]), t = c(this).children(".POJO").length, 
                    c(e).on("refresh", function() {
                        r._fillFieldData(c(this), c(this).data().pojo, i.substring(i.indexOf(".") + 1), t), 
                        r._fillData(c(this), c(this).data().pojo, i.substring(i.indexOf(".") + 1), t);
                    }).trigger("refresh"), c(this).append(e), c(this).trigger("postAddCollection", [ e, a ]));
                }), c(this).val(""), c(this).data().pojo = null, c(this).focus()));
            })));
        }), c(".insertAction", t).each(function() {
            var t;
            c(this).attr("data-field") && (c(this).data("inserter") || (t = c(this).parent().find(".insert")) && (c(this).data("inserter", t), 
            c(this).click(function(t) {
                return t.preventDefault(), c(this).data("inserter").trigger("insert"), !1;
            })));
        }), c("input.object", t).each(function() {
            c(this).on("update", function(t) {
                var e = c(this).data().pojo;
                (c(this).attr("data-display") || c(this).attr("data-render")) && c(this).val(r._renderObject(e, c(this).attr("data-display"), c(this).attr("data-render")));
            });
        }), c("input.blob", t).each(function() {
            var a;
            "file" === c(this).attr("type") && (a = c(this), c(this).on("change", function(t) {
                var e = c(this).val().split(/\\/).pop();
                a.data("name", e);
                t = t.target.files;
                t && t.length && c.each(t, function() {
                    var t = new FileReader();
                    t.onload = function(t) {
                        a.data("blob", t.target.result);
                    }, t.readAsDataURL(this), c(this).trigger("fileChange");
                });
            }));
        });
    }, i.prototype._initList = function(t) {
        var e;
        t.data("template") || ((e = t.children().detach()).removeAttr("id"), t.data("template", e));
    }, i.prototype._getForm = function() {
        var t = [ c(this.element) ];
        return this.options.connect && c.each(this.options.connect, function() {
            t.push(c(this));
        }), t;
    }, i.prototype._clear = function(t, e) {
        e = e || this.options.prefix, c(t).removeData("pojo"), c("input,select,textarea", t).each(function() {
            var t = c(this).attr("name");
            t && 0 === t.indexOf(e + ".") && ((t = t.substring((e + ".").length)).length < 1 || (c(this).removeData("pojo"), 
            "checkbox" === c(this).attr("type") || "radio" === c(this).attr("type") ? c(this).prop("checked", !1) : c(this).data().valclass && c(this)[c(this).data().valclass].val ? c(this)[c(this).data().valclass](val, "") : c(this).val(""), 
            c(this).hasClass("blob") && c(this).removeData("blob"), c(this).is("select") && (c('option[selected="selected"]', this).prop("selected", !1), 
            c("option:first", this).prop("selected", !0), c(this).val(c("option:first", this).val()), 
            c(this).change()), c(this).change()));
        }), c(".collection", t).each(function() {
            var t = c(this).attr("data-field");
            t && 0 === t.indexOf(e + ".") && c(this).empty();
        });
    }, i.prototype._handleArrayInPojo = function(t, a, i, s) {
        var n, r;
        a[i] || (a[i] = []), "checkbox" === t.attr("type") || "CHECKBOX" === t.attr("type") ? (n = t.is(":checked"), 
        r = !0, c.each(a[i], function(t, e) {
            if (this == s) return r = !1, n || a[i].splice(e, 1), !1;
        }), r && n && a[i].push(s)) : null === (t = !(t = t.attr("data-array")) || isNaN(t) ? null : Number(t)) ? a[i].push(s) : a[i][t] = s;
    }, i.prototype._setPojoVal = function(t, e, a, i) {
        if (-1 === e.indexOf(".")) i && i.hasClass("array") ? this._handleArrayInPojo(i, t, e, a) : t[e] = a; else {
            var s, n = e.split("."), r = t[n[0]];
            r && c.isPlainObject(r) || (t[n[0]] = {}, r = t[n[0]]);
            for (var o = 1; o < n.length - 1; o++) (r = (s = r)[n[o]]) !== l && null !== r || (s[n[o]] = r = {});
            s = n[n.length - 1], i && i.hasClass("array") ? this._handleArrayInPojo(c(this), r, s, a) : r[s] = a;
        }
    }, i.prototype._createPojoFromInput = function(t, n, r) {
        var e = null, o = this, i = null;
        return (e = c(t).data("pojo") ? c(t).data("pojo") : e) && c.extend(!0, r, e), c(t).find("input,select,textarea,button,.jsobject").each(function() {
            var t = c(this).attr("data-name");
            if ((t = t || c(this).attr("name")) && !c(this).hasClass("transient") && !c(this).hasClass("grayed") && 0 === t.indexOf(n + ".")) {
                c(this).trigger("validate", !0);
                var e, t = t.substring((n + ".").length), a = c(this).val();
                if (c(this).data().valclass && c(this)[c(this).data().valclass] && (a = c(this)[c(this).data().valclass]("val")), 
                c(this).hasClass("jsobject")) a = c(this).data().pojo; else {
                    if (o.options.skipEmpty && (!a || "" === a || "" === a.trim())) return;
                    if (!c(this).hasClass("emptynull") || a && "" !== a && "null" !== a && "" !== a.trim() ? c(this).hasClass("object") || c(this).hasClass("POJO") ? (c("option:selected", this).data() && c("option:selected", this).data().pojo ? c("option:selected", this).data().pojo ? a = c("option:selected", this).data().pojo : c("option:selected", this).attr("data-obj") && (a = JSON.parse(c("option:selected", this).attr("data-obj"))) : a = c(this).data().pojo, 
                    c.isFunction(c(this).data().processor) ? a = c(this).data().processor(a) : (e = c(this).attr("data-processor")) && o.options.processors[e] && (a = o.options.processors[e](a))) : c(this).hasClass("blob") ? a = c(this).data("blob") : "" === a && (c(this).hasClass("number") || c(this).hasClass("percent") || c(this).hasClass("integer") || c(this).hasClass("dateFilter") || c(this).hasClass("dateTimeFilter")) && (a = null) : a = null, 
                    c(this).data().processor) a = c(this).data().processor(a); else if (c(this).hasClass("number") || c(this).hasClass("integer")) a = c(this).hasClass("date") && isNaN(a) ? c.format ? ((e = c.format.date(a)).setHours(0), 
                    e.setMinutes(0), e.setSeconds(0), e.setMilliseconds(0), e.getTime()) : new Date(a).getTime() : o._getNumber(a), 
                    isNaN(a) && (a = 0); else if ("checkbox" === c(this).attr("type") || "CHECKBOX" === c(this).attr("type")) c(this).hasClass("array") ? (a = c(this).val(), 
                    c(this).attr("data-obj") && (a = JSON.parse(c(this).attr("data-obj")))) : a = c(this).is(":checked"); else if ("radio" === c(this).attr("type") || "RADIO" === c(this).attr("type")) {
                        if (!c(this).is(":checked")) return;
                        c(this).hasClass("bool") && (a = "true" === c(this).val());
                    } else c(this).hasClass("bool") && (a = "true" === c(this).val());
                }
                if (o.options.dataHandler && (a = o.options.dataHandler.serialize(a, c(this), r)), 
                t.length < 1) return i = a, !1;
                o._setPojoVal(r, t, a, c(this));
            }
        }), c(t).find(".selectcollection").each(function() {
            var e, a, i, s = c(this).attr("data-field");
            s && (c(this).hasClass("transient") || 0 === s.indexOf(n + ".") && (c(this).trigger("validate", !0), 
            s = s.substring((n + ".").length), e = [], a = c(this).attr("data-selected"), i = c(this).attr("data-id"), 
            c(this).children().each(function() {
                if (a) {
                    if (!c(this).hasClass(a)) return;
                } else if (!c("input[name='" + s + "']", this).prop("checked")) return;
                var t = null;
                i || c("input[name='" + s + "']", this).hasClass("obj") ? !(t = c(this).data("obj")) && c(this).attr("data-obj") && (t = JSON.parse(c(this).attr("data-obj"))) : t = c("input[name='" + s + "']", this).val(), 
                t && e.push(t);
            }), o._setPojoVal(r, s, e)));
        }), i;
    }, i.prototype._enableTracking = function(t) {
        var e;
        !t || 0 === t.length || (e = this).options.trackChanges && !c(t).data().track && (c(t).data().track = !0, 
        c(t).change(function() {
            c(this).val() !== c(this).data().orig ? c(this).addClass(e.options.trackChanges) : c(this).removeClass(e.options.trackChanges);
        }));
    }, i.prototype._fillSelectCollection = function(t, e, a, i) {
        var l = this;
        c(t).find(".selectcollection").each(function() {
            var s, n, r = c(this).attr("data-selected"), o = c(this).attr("data-id"), t = c(this).attr("data-field");
            t && 0 === t.indexOf(a + ".") && (s = null, n = t, a && (n = n.substring(a.length + 1)), 
            (s = l._get(e, n)) && c.isArray(s) || (s = []), r && (c(this).children("." + r).removeClass(r), 
            c(this).children().each(function() {
                c(this).hasClass("jsfselect") || (c(this).addClass("jsfselect"), c(this).click(function() {
                    c(this).toggleClass(r), c(this).trigger("selected");
                }), c(this).trigger("selected"));
            })), c("input[name='" + n + "']", this).prop("checked", !1), c(this).children().each(function() {
                var t = "";
                if (o) {
                    var e = c(this).data("obj");
                    if (!(e = !e && c(this).attr("data-obj") ? JSON.parse(c(this).attr("data-obj")) : e)) return;
                    t = e[o];
                } else t = c("input[name='" + n + "']", this).val();
                if (t) for (var a = 0; a < s.length; a++) {
                    var i = s[a];
                    if (t == (i = o && i ? i[o] : i)) return r && c(this).addClass(r).trigger("selected"), 
                    void c("input[name='" + n + "']", this).prop("checked", !0);
                }
            }));
        });
    }, i.prototype._fillFieldData = function(t, s, n, r) {
        var o = this, t = c(t);
        0 < n.indexOf(".") && (n = n.substring(n.indexOf(".") + 1)), t.find(".templatefield").each(function() {
            var t = c(this).data().attr, e = c(this).data().mustache;
            e || ("undefined" != typeof Hogan ? e = Hogan.compile(c(this).data().template.replace(/\[\[/g, "{{").replace(/]]/g, "}}")) : "undefined" != typeof Handlebars ? e = {
                render: Handlebars.compile(c(this).data().template.replace(/\[\[/g, "{{").replace(/]]/g, "}}"))
            } : console.error("No mustache renderer found. templating not available (include Handlebars.js or Hogan.js)"), 
            c(this).data().mustache = e);
            var a = {
                data: o.options.data,
                cur: s
            };
            c(this).attr(t, e.render(a));
        }), t.find(".field").each(function() {
            var t, e = (e = c(this).data().name) || c(this).data().field, a = (a = c(this).attr("data-prefix")) || "", i = (i = c(this).attr("data-postfix")) || "";
            e || ("A" === this.nodeName.toUpperCase() ? (e = c(this).attr("href"), c(this).attr("href", "#")) : "IMG" === this.nodeName.toUpperCase() ? (0 === (e = c(this).attr("src")).indexOf("#") && (e = e.substring(1)), 
            c(this).attr("src", "#")) : e = c(this).text(), c(this).data("name", e), c(this).show()), 
            (!n || 0 <= e.indexOf(n + ".")) && (t = e, n && (t = t.substring(n.length + 1)), 
            (e = o._get(s, t, !1, r)) || 0 === e || !1 === e ? "" !== e && ("" !== a && (e = a + e), 
            "" !== i && (e += i)) : e = "", c(this).hasClass("currency") && (e = e || 0), c(this).hasClass("titleval") && c(this).attr("title", e), 
            c(this).hasClass("setObj") ? (c(this).data().pojo = e, c(this).addClass("POJO")) : (o.options.dataHandler && (e = o.options.dataHandler.deserialize(e, c(this), t, s)), 
            c.jsFormControls && (e = c.jsFormControls.Format.format(this, e)), "A" === this.nodeName.toUpperCase() ? c(this).attr("href", e) : "IMG" === this.nodeName.toUpperCase() ? c(this).attr("src", e) : "DIV" === this.nodeName.toUpperCase() || c(this).hasClass("noescape") ? c(this).html(e) : c(this).text(e)));
        });
    }, i.prototype._fillData = function(t, n, r, o) {
        var l = this, t = c(t);
        0 < r.indexOf(".") && (r = r.substring(r.indexOf(".") + 1)), t.data().refresh || (t.data().refresh = !0, 
        t.on("refresh", function() {
            var t = c(this).data().pojo;
            t && l._fillData(c(this), t, r, o);
        })), c("input,textarea,button", t).each(function() {
            var t = c(this).attr("name");
            if (t && (l._enableTracking(this), !r || 0 <= t.indexOf(r + "."))) {
                var e = t;
                r && (e = e.substring(r.length + 1));
                var a, i, s, t = l._get(n, e, !1, o);
                if (l.options.dataHandler && (t = l.options.dataHandler.deserialize(t, c(this), e, n)), 
                "file" == c(this).attr("type")) return c(this).data().pojo = t, void c(this).addClass("POJO");
                c(this).hasClass("object") ? (c(this).data().pojo = t, c(this).addClass("POJO"), 
                t = l._renderObject(t, c(this).attr("data-display"), c(this).attr("data-render"))) : c(this).hasClass("jsobject") ? (c(this).data().pojo = t, 
                c(this).addClass("POJO")) : c.isPlainObject(t) && (t = "" === e ? "" : (c(this).data().pojo = t, 
                c(this).addClass("POJO"), l._renderObject(t, c(this).attr("data-display"), c(this).attr("data-render")))), 
                "checkbox" === c(this).attr("type") ? c(this).hasClass("array") ? (a = c(this).val(), 
                i = null, c(this).attr("data-obj") && (a = JSON.parse(c(this).attr("data-obj"))), 
                c(this).attr("data-id") && (i = c(this).attr("data-id"), a = a[i]), s = !1, t && c.each(t, function() {
                    var t = this;
                    if ((t = i ? t[i] : t) == a) return !(s = !0);
                }), c(this).prop("checked", s)) : c(this).prop("checked", !0 === t || "true" === t) : "radio" === c(this).attr("type") ? c(this).hasClass("bool") ? c(this).prop("checked", t + "" === c(this).val()) : c(this).prop("checked", t == c(this).val()) : (t || 0 === t || !1 === t || (t = ""), 
                c.jsFormControls && (t = c.jsFormControls.Format.format(this, t)), c(this).hasClass("array") ? null !== (e = !(e = c(this).attr("data-array")) || isNaN(e) ? null : Number(e)) && t && t.length > e ? c(this).val(t[e]) : c(this).val("") : c(this).data().valclass && c(this)[c(this).data().valclass] ? t.toDate ? c(this)[c(this).data().valclass]("val", t.toDate()) : c(this)[c(this).data().valclass]("val", t) : c(this).val(t)), 
                l.options.trackChanges && (c(this).data().orig = c(this).val()), c(this).trigger("fill"), 
                c(this).change();
            }
        }), c("select", t).each(function() {
            var t = c(this).attr("name");
            if (t && (!r || 0 <= t.indexOf(r + "."))) {
                t = t;
                r && (t = t.substring(r.length + 1)), l._enableTracking(this), c(this).children("option:selected").prop("selected", !1);
                var e = (e = c(this).attr("data-key")) || "id", a = l._get(n, t, !1, o);
                if ((a = l.options.dataHandler ? l.options.dataHandler.deserialize(a, c(this), t, n) : a)[e] || !isNaN(a[e])) return c(this).children("option").each(function() {
                    var t = c(this).data().pojo;
                    if (t = t || c(this).data().obj) {
                        if (a[e] === t[e]) return c(this).prop("selected", !0), !1;
                    } else if (c(this).val() == a[e]) return c(this).attr("selected", !0), !1;
                }), void c(this).change().removeClass("changed");
                c(this).hasClass("bool") && (a = a ? "true" : "false"), c(this).children("option[value='" + a + "']").prop("selected", !0), 
                c(this).val(a), l.options.trackChanges && (c(this).data().orig = c(this).val()), 
                c(this).change().trigger("fill").removeClass("changed");
            }
        });
    }, i.prototype.get = function(t) {
        var e = this, a = this.options.data, i = this.options.prefix, s = {};
        a && c.isPlainObject(a) && (s = c.extend({}, a));
        var n = !1;
        return c.each(this._getForm(), function() {
            e._createPojoFromInput(this, i, s), e.options.validateHidden ? this.find(".invalid").each(function() {
                return console.log("Invalid: " + c(this).attr("name")), n = !0, c(this).focus(), 
                !1;
            }) : this.find(".invalid").filter(":visible").each(function() {
                return console.log("Invalid: " + c(this).attr("name")), n = !0, c(this).focus(), 
                t || e._debug("Found invalid field: " + c(this).attr("name")), !1;
            }), e._getCollection(this, i, s, t) && (n = !0);
        }), !t && n ? null : s;
    }, i.prototype._getCollection = function(t, e, s, n) {
        var r = this, o = !1;
        return t.find(".collection").each(function() {
            var a, i;
            !n && o || c(this).hasClass("transient") || (a = c(this).attr("data-field")) && 0 === a.indexOf(e + ".") && (a = a.substring((e + ".").length), 
            i = r._getParent(s, a, !0), -1 !== a.indexOf(".") && (a = a.substring(a.lastIndexOf(".") + 1)), 
            i[a] = [], c(this).children().each(function() {
                var t = {}, e = r._createPojoFromInput(c(this), a, t);
                if (e || r._getCollection(c(this), a, t, n), !r._isEmpty(t) || e) {
                    if (0 < c(".invalid", this).length && (o = !0, !n)) return !1;
                    e ? i[a].push(e) : i[a].push(t);
                } else c(".invalid", this).removeClass("invalid");
            }));
        }), o;
    }, i.prototype.getData = function() {
        return this.options.data || (this.options.data = {}), this.options.data;
    }, i.prototype.fieldMode = function(t, e) {
        var a;
        t && (t.data || (t = c("input[name='" + t + "']", this.element)), a = this.options.viewClass, 
        e ? t.closest("span." + a)[0] || ("null" !== (e = t.val()) && null !== e && "submit" !== t.attr("type") || (e = ""), 
        e = (e = t.hasClass("trueFalse") ? t.is(":checked") ? "X" : "&#160;" : e).replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/\n/g, "<br/>"), 
        e = c('<span class="' + a + '">' + e + "</span>"), (t.parent().hasClass("ui-wrapper") ? t.parent() : t).hide().wrap(e)) : (a = t.closest("span." + a), 
        t = t.show().detach(), a.before(t), a.remove()));
    }, i.prototype.preventEditing = function(t) {
        var e = c(this.element), a = this.options.viewClass;
        if (void 0 === t) t = !e.data("disabled"); else if (t === e.data("disabled")) return;
        t ? (e.find("input, textarea").each(function() {
            var t, e;
            c(this).closest("span." + a)[0] || "hidden" != c(this).attr("type") && ("null" !== (t = c(this).val()) && null !== t && "submit" !== c(this).attr("type") || (t = ""), 
            c(this).hasClass("trueFalse") && (t = c(this).is(":checked") ? "X" : "&#160;"), 
            c(this).hasClass("noescape") ? (e = c('<div class="' + a + '">' + t + "</div>")).html(t) : (t = t.replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/\n/g, "<br/>"), 
            e = c('<span class="' + a + '">' + t + "</span>")), (c(this).parent().hasClass("ui-wrapper") ? c(this).parent() : c(this)).hide().before(e));
        }), e.find("select").each(function() {
            var t;
            c(this).closest("span." + a)[0] || (t = c(this).children(":selected").html(), t = c('<span class="' + a + '">' + (t = "null" === t || null === t ? "" : t) + "</span>"), 
            (c(this).hasClass("ui-toggle-switch") ? c(this).prev() : c(this)).hide().before(t));
        })) : e.find("span." + a + ",div." + a).each(function() {
            c(this).next("input,select,textarea,.ui-wrapper,.ui-toggle-switch").show();
            c(this).remove();
        }), e.data("disabled", t);
    }, i.prototype.validate = function() {
        var t = !0;
        return c.each(this._getForm(), function() {
            c(".required,.regexp,.date,.mandatory,.number,.validate,.integer", this).change(), 
            0 < c(".invalid", this).length && (t = !1);
        }), t;
    }, i.prototype._fill = function(t) {
        var e = this;
        c(this.element).addClass("POJO"), c(this.element).data("pojo", this.options.data), 
        c.each(this._getForm(), function() {
            try {
                e._fillDom(this, t);
            } catch (t) {
                console.log("Exception while filling form", t);
            }
        }), c(this.element).trigger("filled");
    }, i.prototype._fillDom = function(t, e) {
        var a = this;
        e || a._clear(t, a.options.prefix), a._fillFieldData(t, a.options.data, a.options.prefix), 
        e || (a._fillData(t, a.options.data, a.options.prefix), a._fillSelectCollection(t, a.options.data, a.options.prefix)), 
        a._fillCollection(t, a.options.data, a.options.prefix, e), a._evaluateConditionals(t, a.options.data);
    }, i.prototype._fillCollection = function(t, o, l, h) {
        var d = this;
        c(".collection", t).each(function() {
            var t = c(this), e = c(this).attr("data-field");
            if (o && e && 0 === e.indexOf(l + ".")) {
                var a, i = e;
                if (l && (i = i.substring(l.length + 1)), a = d._get(o, i)) if (h) for (var s = 0; s < a.length; s++) {
                    -1 !== i.indexOf(".") && (l = i.substring(i.lastIndexOf(".") + 1));
                    var n = c(t.children().get(s)), r = a[s];
                    d._fillFieldData(n, r, i, s + 1), d._fillCollection(n, r, i, h);
                } else d._fillList(t, a, i);
            }
        });
    }, i.prototype._fillList = function(t, e, a, i) {
        var s = t.data("template");
        if (s && (t.empty(), c.isArray(e))) {
            if (-1 !== a.indexOf(".") && (a = a.substring(a.lastIndexOf(".") + 1)), t.hasClass("sort")) {
                var n = t.attr("data-sort");
                if (n) {
                    switch (t.attr("data-sorttype")) {
                      case "alpha":
                        e.sort();
                        break;

                      case "alphainsensitiv":
                        e.sort(function(t, e) {
                            return t = t[n], e = e[n], (t = t && t.toLowerCase()) < (e = e && e.toLowerCase()) ? -1 : e < t ? 1 : 0;
                        });
                        break;

                      default:
                        e.sort(function(t, e) {
                            return t[n] - e[n];
                        });
                    }
                    t.attr("data-sortdesc") && e.reverse();
                }
            }
            i || c.isFunction(a) && (i = a, a = null);
            for (var r = 0; r < e.length; r++) {
                var o = e[r], l = s.clone(!0);
                l.data().pojo = o, l.addClass("POJO"), i && !1 === i(l, o) || (this._fillLine(o, l, a, r), 
                t.append(l), t.trigger("postAddCollection", [ l, c(l).data().pojo ]));
            }
        }
    }, i.prototype._fillLine = function(t, e, a, i) {
        var s = this;
        s._addCollectionControls(e), container.trigger("addCollection", [ e, t ]), a && (c(e).on("refresh", function() {
            s._fillFieldData(c(this), c(this).data().pojo, a, i + 1), s._fillData(c(this), c(this).data().pojo, a, i + 1);
        }).trigger("refresh"), s._initCollection(e, a), s._fillCollection(e, t, a));
    }, i.prototype._addCollectionControls = function(t) {
        var i = this, e = c(t).closest(".collection");
        c.jsFormControls && c(t).jsFormControls(), t.on("delete", function(t, e) {
            var a, i;
            e && e[0] !== this || (a = c(this), i = c(a).data().pojo, e = c(this).closest(".collection"), 
            a.detach(), c(e).trigger("deleteCollection", [ a, i ]));
        }), t.on("sortUp", function(t, e) {
            var a;
            e && e[0] !== this || 0 !== (e = (a = c(this)).prev(".POJO")).size() && (a.detach(), 
            e.before(a), i._reorder(a));
        }), t.on("sortDown", function(t, e) {
            var a;
            e && e[0] !== this || 0 !== (e = (a = c(this)).next(".POJO")).size() && (a.detach(), 
            e.after(a), i._reorder(a));
        }), c(".delete", t).click(function() {
            var t = c(this).closest(".POJO");
            t.trigger("delete", [ t ]);
        }), c(".sortUp", t).click(function() {
            var t = c(this).closest(".POJO");
            t.trigger("sortUp", [ t ]);
        }), c(".sortDown", t).click(function() {
            var t = c(this).closest(".POJO");
            t.trigger("sortDown", [ t ]);
        }), e.hasClass("sortable") && c(e).sortable && e.sortable("refresh");
    }, i.prototype._reorder = function(t) {
        t.attr("data-sort") || (t = t.closest(".collection"));
        var e, a = c(t).attr("data-sort");
        !a || c(t).attr("data-sorttype") && "number" !== c(t).attr("data-sorttype") || c(t).attr("data-sortdesc") && "false" !== c(t).attr("data-sortdesc") || (e = 0, 
        c.each(c(t).children(), function() {
            var t = c(this).data("pojo");
            t || (t = {}, c(this).data("pojo", t)), t[a] = e++;
        }));
    }, i.prototype._renderObject = function(e, t, a) {
        if (!e || !t && !a) return "";
        if (a) return this.options.renderer && this.options.renderer[a] ? this.options.renderer[a](e) : (this._debug("Unable to find renderer: " + a), 
        "");
        var i = this, s = "";
        return c.each(t.split(","), function() {
            var t = this.trim();
            0 === t.indexOf("'") || 0 === t.indexOf('"') ? s += t.substring(1, t.length - 1) : s += i._get(e, t);
        }), s;
    }, i.prototype._get = function(t, e, a, i) {
        var s, n, r, o = "";
        if ("function" == typeof e) return e(t);
        if (!t) return "";
        if ("" === e) return t;
        if ("$idx" === e) return i;
        if (!(s = t[e])) try {
            if (r = (o = "string" == typeof e ? e.split(".") : o).length) for (s = t; s && r--; ) n = o.shift(), 
            a && !s[n] && (s[n] = {}), s = s[n];
        } catch (t) {}
        return (s = null === s || s === l ? "" : s).trim ? s.trim() : s;
    }, i.prototype._getValueWithArrays = function(t, e) {
        if (null === t) return null;
        e = e.split(".");
        for (var a = /(.*)\[(\d+)\]/, i = 1; i < e.length; i++) {
            var s = a.exec(e[i]);
            try {
                t = s ? t[s[1]][parseInt(s[2], 10)] : t[e[i]];
            } catch (t) {
                this._debug(e + " " + t);
            }
        }
        return t;
    }, i.prototype._getParent = function(t, e, a) {
        return -1 === e.indexOf(".") ? t : (e = e.substring(0, e.lastIndexOf(".")), this._get(t, e, a));
    }, i.prototype._getNumber = function(t) {
        return t ? c.jsFormControls ? c.jsFormControls.Format._getNumber(t) : (-1 !== t.indexOf(",") && -1 !== t.indexOf(".") ? t = t.replace(new RegExp(",", "g"), "") : -1 !== t.indexOf(",") && -1 === t.indexOf(".") && (t = t.replace(new RegExp(",", "g"), ".")), 
        Number(t)) : null;
    }, i.prototype._isEmpty = function(t) {
        if (!t) return !0;
        if (c.isArray(t)) {
            if (0 === t.length) return !0;
            for (var e = 0; e < t.length; e++) if (!this._isEmpty()) return !1;
            return !0;
        }
        if (c.isPlainObject(t)) {
            if (c.isEmptyObject(t)) return !0;
            for (var a in t) if (!this._isEmpty(t[a])) return !1;
            return !0;
        }
        return isNaN(t) ? "" === t || " " === t : 0 === Number(t) || -1 === Number(t);
    }, i.prototype._equals = function(t, e, a) {
        if (!t && e && e.length && 0 === e.length) return !0;
        if (!e && t && t.length && 0 === t.length) return !0;
        if (!t && !e) return !0;
        var i = null;
        for (i in t) {
            if (void 0 === e[i] && null !== t[i] && "" !== t[i] && 0 !== t[i].length) {
                if (("0" === t[i] || 0 === t[i]) && !e[i]) continue;
                return !1;
            }
            if (t[i]) switch (typeof t[i]) {
              case "object":
                if (a && t[i][a] && t[i][a] === e[i][a]) continue;
                if (!this._equals(t[i], e[i])) return !1;
                break;

              case "function":
                break;

              default:
                if (!t[i] && !e[i]) break;
                if ((!0 === t || !1 === t) && t !== e) return !1;
                if (!isNaN(t[i]) || !isNaN(e[i])) {
                    if (Math.abs(Number(t[i]) - Number(e[i])) < 1e-7) break;
                    return !1;
                }
                if (("" + t[i]).length !== ("" + e[i]).length) return !1;
                if (t[i] !== e[i] && Number(t[i]) !== Number(e[i])) return !1;
            } else if (e[i]) return !1;
        }
        for (i in e) if ((!t || void 0 === t[i]) && null !== e[i] && "" !== e[i]) return !1;
        return !0;
    }, i.prototype.equals = function(t, e) {
        var a = this.get(!1);
        return this._equals(a, t, e);
    }, i.prototype.changed = function() {
        if (!this.options.trackChanges) return !1;
        var t = !1, e = this;
        return c.each(this._getForm(), function() {
            if (0 < c("." + e.options.trackChanges, this).size()) return !(t = !0);
        }), t;
    }, i.prototype.clearChanged = function() {
        var t = this;
        c.each(this._getForm(), function() {
            this.find("." + t.options.trackChanges).removeClass(t.options.trackChanges);
        });
    }, i.prototype.resetChanged = function() {
        if (!this.options.trackChanges) return !1;
        var t = this;
        return c.each(this._getForm(), function() {
            c("." + t.options.trackChanges, this).each(function() {
                c(this).removeClass(t.options.trackChanges), c(this).data().orig = c(this).val();
            });
        }), !1;
    }, i.prototype._equalsCollection = function(t, i, s) {
        var n = this, r = !1;
        return c(".collection", t).each(function() {
            var e, a;
            r || (a = c(this).attr("data-field")) && 0 === a.indexOf(i + ".") && ((a = a.substring((i + ".").length)).length < 1 || (e = 0, 
            c(this).children().each(function() {
                var t;
                r || (e >= s[a].length ? r = !0 : (t = s[a][e++], n._pojoDifferFromInput(c(this), a, t) && (r = !0), 
                n._equalsCollection(c(this), a, t) || (r = !0)));
            }), s[a] && e < s[a].length && (r = !0)));
        }), !r;
    }, i.prototype.fill = function(t) {
        this.options.data = c.extend({}, t), this._fill();
    }, i.prototype.fillFields = function(t) {
        this.options.data = c.extend({}, t), this._fill(!0);
    }, i.prototype.applyConditions = function(t) {
        t = t || this.get(!0), this._evaluateConditionals(this.element, t);
    }, i.prototype.reset = function() {
        this.fill({});
    }, i.prototype.clear = function() {
        var t = this;
        c.each(this._getForm(), function() {
            t._clear(this, t.options.prefix);
        });
    }, i.prototype.destroy = function() {
        return c(this.element).each(function() {
            c(this).removeData("jsForm"), c.jsFormControls && c(this).jsFormControls("destroy");
        });
    }, c.fn.jsForm = function(t) {
        if ("object" != typeof t && t) {
            var e = Array.prototype.slice.call(arguments, 1);
            if (0 === this.length) return null;
            if (1 === this.length) {
                var a = c(this).data("jsForm");
                if (a) return 0 !== t.indexOf("_") && a[t] ? a[t].apply(a, e) : (c.error("Method " + t + " does not exist on jQuery.jsForm"), 
                !1);
            }
            return this.each(function() {
                if (a = c.data(this, "jsForm")) return 0 !== t.indexOf("_") && a[t] ? a[t].apply(a, e) : (c.error("Method " + t + " does not exist on jQuery.jsForm"), 
                !1);
            });
        }
        return this.each(function() {
            c(this).data("jsForm") || c(this).data("jsForm", new i(this, t));
        });
    }, c.jsForm = function(t, e) {
        var a, i, s = r[t];
        c.isFunction(e) ? (s && c.each(s, function() {
            e(this, c(this.element));
        }), n[t] = e) : s && (a = e, i = Array.prototype.slice.call(arguments, 2), c.each(portlets, function() {
            this[a].apply(this, i);
        }));
    };
}(jQuery, window), function(l, r) {
    "use strict";
    var n = {}, o = {};
    function i(t) {
        this.element = t, this._domInit();
    }
    "undefined" != typeof Handlebars && (Handlebars.registerHelper("currency", function(t) {
        return t ? l.jsFormControls.Format.currency(t) : l.jsFormControls.Format.currency(0);
    }), Handlebars.registerHelper("dec", function(t) {
        return t ? l.jsFormControls.Format.decimal(t) : "";
    }), Handlebars.registerHelper("percent", function(t) {
        return t ? l.jsFormControls.Format.decimal(100 * t) : "0";
    }), Handlebars.registerHelper("date", function(t) {
        return t ? l.jsFormControls.Format.date(t) : "";
    }), Handlebars.registerHelper("time", function(t) {
        return t ? l.jsFormControls.Format.time(t) : "";
    }), Handlebars.registerHelper("datetime", function(t) {
        return t ? l.jsFormControls.Format.dateTime(t) : "";
    }), Handlebars.registerHelper("dateTime", function(t) {
        return t ? l.jsFormControls.Format.dateTime(t) : "";
    }), Handlebars.registerHelper("timespan", function(t) {
        return t ? l.jsFormControls.Format.humanTime(t) : "";
    }), Handlebars.registerHelper("humanTime", function(t) {
        return t ? l.jsFormControls.Format.humanTime(t) : "";
    }), Handlebars.registerHelper("byte", function(t) {
        return t ? l.jsFormControls.Format.byte(t) : "";
    }), Handlebars.registerHelper("integer", function(t) {
        return t ? l.jsFormControls.Format.integer(t) : "";
    })), i.prototype._domInit = function() {
        var t = l(this.element);
        t.find("input.mandatory,textarea.mandatory").on("keyup", function() {
            0 < l(this).val().length && "null" !== l(this).val() ? l(this).addClass("valid").removeClass("invalid") : l(this).removeClass("valid").addClass("invalid");
        }), t.find("input.mandatory,textarea.mandatory").on("change", function() {
            l(this).hasClass("object") ? l(this).data().pojo ? l(this).addClass("valid").removeClass("invalid") : l(this).removeClass("valid").addClass("invalid") : 0 < l(this).val().length && "null" !== l(this).val() ? l(this).addClass("valid").removeClass("invalid") : l(this).removeClass("valid").addClass("invalid");
        }).change(), t.find("select.mandatory").change(function() {
            null !== l(this).val() && "null" !== l(this).val() && 0 < l(this).val().length ? l(this).addClass("valid").removeClass("invalid") : l(this).removeClass("valid").addClass("invalid");
        }).change(), t.find("input.date").each(function() {
            var i, t = null, e = l(this).attr("data-format");
            r.flatpickr ? (i = l(this), r.flatpickr(l(this)[0], {
                enableTime: !1,
                allowInput: !0,
                time_24hr: !1,
                dateFormat: i18n.flatpickrDate,
                onOpen: [ function(t, e, a) {
                    new Date();
                    "" === i.val() && moment(i.val(), i18n.momentDateTime).toDate(), a.jumpToDate(new Date()), 
                    a.setDate(new Date());
                } ]
            })) : l(this).jqxDateTimeInput ? (l(this).data().valclass = "jqxDateTimeInput", 
            e ? l(this).jqxDateTimeInput({
                formatString: e
            }) : ("undefined" != typeof i18n ? t = i18n.date : l(document).data().i18n && l(document).data().i18n.date && (t = l(document).data().i18n.date), 
            l(this).jqxDateTimeInput({
                formatString: t.shortDateFormat,
                width: l(this).width()
            }))) : l(this).datepicker && (void 0 !== e ? t = e : "undefined" != typeof i18n && (t = i18n.jqdate), 
            t ? l(this).datepicker({
                dateFormat: t
            }) : l(this).datepicker());
        }), t.find("input.dateTime").each(function() {
            var t, e, a, i = null, s = l(this).attr("data-format"), n = l(this);
            r.flatpickr ? r.flatpickr(l(this)[0], {
                enableTime: !0,
                time_24hr: !0,
                allowInput: !0,
                dateFormat: i18n.flatpickrDateTime,
                onOpen: [ function(t, e, a) {
                    var i;
                    "" === n.val() ? a.jumpToDate(new Date()) : (i = moment(n.val(), i18n.momentDateTime), 
                    a.jumpToDate(i.toDate()), a.setDate(i.toDate(), !0));
                } ]
            }) : n.datetimepicker && n.hasClass("form-control") ? (s ? i = s : "undefined" != typeof i18n && (i = i18n.momentDate), 
            a = "DTID_" + l(this).attr("name").replace(".", "_"), (t = l('<div class="input-group date" data-target-input="nearest"/>')).attr("id", a), 
            n.parent().append(t), n.addClass("datetimepicker-input").attr("data-target", "#" + a), 
            e = l('<div class="input-group-append" data-toggle="datetimepicker"><div class="input-group-text"><i class="fa fa-calendar"></i></div></div>'), 
            t.append(n), t.append(e), e.attr("data-target", "#" + a), i ? l(this).datetimepicker({
                format: "DD.MM.YYYY  HH:mm"
            }) : l(this).datetimepicker()) : l(this).jqxDateTimeInput && (l(this).data().valclass = "jqxDateTimeInput", 
            a = {
                showTimeButton: !0
            }, l(this).attr("data-width") ? a.width = Number(l(this).attr("data-width")) : a.width = l(this).width(), 
            s ? a.formatString = s : ("undefined" != typeof i18n ? i = i18n.date : l(document).data().i18n && l(document).data().i18n.date && (i = l(document).data().i18n.date), 
            a.formatString = i.shortDateFormat + " HH:mm"), l(this).jqxDateTimeInput(a));
        }), t.find("input.time").each(function() {
            l(this).clockpicker && l(this).parent().hasClass("clockpicker") ? (l(this).attr("type", "text"), 
            l(this).parent().clockpicker({
                autoclose: !0
            })) : l(this).datetimepicker ? l(this).datetimepicker() : l(this).jqxDateTimeInput && (l(this).jqxDateTimeInput({
                formatString: "HH:mm",
                showTimeButton: !0,
                showDateButton: !1
            }), l(this).data().valclass = "jqxDateTimeInput");
        });
        var e = new RegExp("^[0-9.,-]+$");
        t.find("input.number").keyup(function() {
            var t = l(this).val();
            0 < (t = l(this).hasClass("currency") && t ? l.jsFormControls.Format._getNumber(t) : t).length && (l(this).hasClass("autoclean") ? l(this).val(t.replace(/[^0-9.,-]/g, "")) : e.test(l(this).val()) ? l(this).addClass("valid").removeClass("invalid") : l(this).removeClass("valid").addClass("invalid"));
        }).keyup(), t.find("input.currency").each(function() {
            l(this).on("change blur", function() {
                var t = l(this).val();
                0 < t.length && l(this).val(l.jsFormControls.Format.currency(l.jsFormControls.Format._getNumber(t)));
            }), l(this).focus(function() {
                var t = l(this).val();
                0 < t.length && l(this).val(l.jsFormControls.Format._getNumber(t)), l(this).select();
            });
        }), t.find("input.percent").change(function() {
            var t = l(this).val();
            0 < t.length && l(this).val(l.jsFormControls.Format.decimal(l.jsFormControls.Format._getNumber(t))), 
            l(this).focus(function() {
                var t = l(this).val();
                0 < t.length && l(this).val(l.jsFormControls.Format._getNumber(t)), l(this).select();
            });
        }), t.find("input.decimal").change(function() {
            var t = l(this).val();
            0 < t.length && l(this).val(l.jsFormControls.Format.decimal(l.jsFormControls.Format._getNumber(t)));
        }), t.find("input.vunit").change(function() {
            var t = l(this).val();
            0 < t.length && (t = l.jsFormControls.Format._getNumber(t), l(this).data().val = t, 
            l(this).val(l.jsFormControls.Format.vunit(t, l(this).attr("data-unit"))));
        });
        var a = new RegExp("^[0-9]+$");
        t.find("input.integer").keyup(function() {
            var t = l(this).val();
            0 < t.length && (l(this).hasClass("autoclean") ? l(this).val(t.replace(/[^0-9]/g, "")) : a.test(l(this).val()) ? l(this).addClass("valid").removeClass("invalid") : l(this).removeClass("valid").addClass("invalid"));
        }).keyup(), t.find("input.regexp").each(function() {
            l(this).keyup(function() {
                l(this).hasClass("autoclean") ? l(this).data("regexp", new RegExp(l(this).attr("data-regexp"), "g")) : l(this).data("regexp", new RegExp(l(this).attr("data-regexp")));
                var t, e = l(this).val();
                0 < e.length ? (t = l(this).data("regexp"), l(this).hasClass("autoclean") ? l(this).val(e.replace(t, "")) : t.test(l(this).val()) ? l(this).addClass("valid").removeClass("invalid") : l(this).removeClass("valid").addClass("invalid")) : l(this).hasClass("mandatory") || l(this).removeClass("invalid").addClass("valid");
            }).keyup(), l(this).change(function() {
                l(this).keyup();
            });
        }), t.find("input.rotatestate").each(function() {
            var t = l(this).attr("data-state-values"), e = l(this).attr("data-state-class");
            if (t) {
                try {
                    t = JSON.parse(t);
                } catch (t) {
                    return;
                }
                var a = l("<span></span>");
                l(this).attr("title") && a.attr("title", l(this).attr("title")), l(this).attr("data-state-style") && a.attr("style", l(this).attr("data-state-style")), 
                a.data("states", t), a.data("control", this), a.data("activeState", null), l(this).data("control", a), 
                e && a.addClass(e), a.click(function() {
                    var t = l(this).data().activeState, e = l(this).data().states, a = l(this).data().control, i = null;
                    if (null !== t) {
                        for (var s = 0; s < e.length; s++) if (e[s].value === t.value) {
                            i = s === e.length - 1 ? e[0] : e[s + 1];
                            break;
                        }
                    } else i = e[0];
                    l(a).attr("value", i.value), l(a).change();
                }), l(this).change(function() {
                    var t = l(l(this).data().control), e = t.data().activeState, a = t.data().states;
                    null !== e && t.removeClass(e.class);
                    var i = l(this).val();
                    l.each(a, function() {
                        if (this.value === i) return (t.data().activeState = this).title && t.attr("title", this.title), 
                        t.addClass(this.class), !1;
                    });
                }), l(this).change(), l(this).after(a), l(this).hide();
            }
        });
    }, i.prototype.validate = function() {
        return l(".required,.regexp,.date,.mandatory,.number,.validate", this.element).change(), 
        !(0 < l(".invalid", this.element).length);
    }, i.prototype.destroy = function() {
        return l(this.element).each(function() {
            l(this).removeData("jsFormControls");
        });
    }, l.fn.jsFormControls = function(e) {
        if ("object" != typeof e && e) {
            var a = Array.prototype.slice.call(arguments, 1);
            if (1 == this.length) {
                var t = l(this).data("jsFormControls");
                if (t) return 0 !== e.indexOf("_") && t[e] ? t[e].apply(t, a) : (l.error("Method " + e + " does not exist on jQuery.jsFormControls"), 
                !1);
            }
            return this.each(function() {
                var t = l.data(this, "jsFormControls");
                if (t) return 0 !== e.indexOf("_") && t[e] ? t[e].apply(t, a) : (l.error("Method " + e + " does not exist on jQuery.jsFormControls"), 
                !1);
            });
        }
        return this.each(function() {
            l(this).data("jsFormControls") || l(this).data("jsFormControls", new i(this));
        });
    }, l.jsFormControls = function(t, e) {
        var a, i, s;
        l.isFunction(e) ? ((s = o[t]) && l.each(s, function() {
            e(this, l(this.element));
        }), n[t] = e) : (s = o[t]) && (a = e, i = Array.prototype.slice.call(arguments, 2), 
        l.each(portlets, function() {
            this[a].apply(this, i);
        }));
    }, l.jsFormControls.Format = {
        format: function(t, e) {
            return l(t).hasClass("dateTime") || l(t).hasClass("datetime") ? isNaN(e) ? e : l.jsFormControls.Format.dateTime(e) : l(t).hasClass("date") ? isNaN(e) ? e : l.jsFormControls.Format.date(e) : l(t).hasClass("time") ? isNaN(e) ? e : l.jsFormControls.Format.time(e) : l(t).hasClass("currency") ? l.jsFormControls.Format.currency(e) : l(t).hasClass("byte") ? isNaN(e) ? e : l.jsFormControls.Format.byte(e) : l(t).hasClass("decimal") ? (l(t).data().processor = l.jsFormControls.Format.getDecimal, 
            l.jsFormControls.Format.decimal(e)) : l(t).hasClass("vunit") ? (l(this).data().val = e, 
            l(t).data().processor = l.jsFormControls.Format.getVunit, l.jsFormControls.Format.vunit(e, l(t).attr("data-unit"))) : l(t).hasClass("percent") ? (l(t).data().processor = l.jsFormControls.Format.getPercent, 
            l.jsFormControls.Format.percent(e)) : l(t).hasClass("humantime") ? (l(t).data().processor = l.jsFormControls.Format.getHumanTime, 
            l.jsFormControls.Format.humanTime(e)) : l(t).hasClass("timespan") ? l.jsFormControls.Format.timespan(e) : e;
        },
        _getValue: function(t, e, a, i, s) {
            return void 0 === e && void 0 === a ? t : isNaN(t) || void 0 === e || void 0 === a ? void 0 : a;
        },
        checkBox: function(t, e, a, i, s) {
            return (a = l.jsFormControls.Format._getValue(t, e, a, i)) ? '<span class="ui-icon ui-icon-check">&nbsp;</span>' : '<span class="ui-icon ui-icon-close">&nbsp;</span>';
        },
        _getNumber: function(t) {
            if (!t) return null;
            var e = {
                format: "#,##0.###",
                groupingSeparator: ",",
                decimalSeparator: "."
            }, a = null, i = null;
            "undefined" != typeof i18n && i18n.number ? (e = i18n.number, i18n.currency && (a = i18n.currency.prefix, 
            i = i18n.currency.suffix)) : l(document).data().i18n && l(document).data().i18n.number && (e = l(document).data().i18n.number, 
            l(document).data().i18n.currency && (a = l(document).data().i18n.currency.prefix, 
            i = l(document).data().i18n.currency.suffix)), t = "" + t, a && 0 < a.length && 0 === t.indexOf(a) && (t = t.substring(a.length)), 
            i && 0 < i.length && 0 < t.indexOf(i) && (t = t.substring(0, t.length - i.length));
            i = (t = l.trim(t)).indexOf(e.groupingSeparator);
            return -1 !== i && (i >= t.length - 3 ? (console.log("gs looks like decimal: "), 
            "." !== e.groupingSeparator && (t = t.replace(new RegExp(e.groupingSeparator, "g"), "."))) : t = t.replace(new RegExp("\\" + e.groupingSeparator, "g"), "")), 
            "." !== e.decimalSeparator && -1 !== t.indexOf(e.decimalSeparator) && "." !== e.decimalSeparator && (t = t.replace(new RegExp(e.decimalSeparator, "g"), ".")), 
            Number(t);
        },
        _pad: function(t) {
            var e = t < 10 ? "0" : "";
            return e += t;
        },
        asMoment: function(e) {
            if ("undefined" == typeof moment) return new Date(e);
            var t = moment().toMomentFormatString(i18n.date.format), a = moment().toMomentFormatString(i18n.date.timeFormat), i = null;
            return l.each([ t + " " + a, t, a ], function() {
                if (i) return !1;
                var t = moment(e, this, !0);
                return t.isValid() ? (i = t, !1) : void 0;
            }), i = i || moment(e);
        },
        asNumber: function(t) {
            return l.jsFormControls.Format._getNumber(t);
        },
        byte: function(t) {
            if ("" === t || !t || isNaN(t)) return t;
            if (t < 1024) return t + " B";
            var e = Math.floor(Math.log(t) / Math.log(1024)), a = "KMGTPE".charAt(e - 1) + "B";
            return Math.round(10 * t / Math.pow(1024, e)) / 10 + a;
        },
        vunit: function(t, e) {
            if ("" === t || !t || isNaN(t)) return t;
            var a = t < 0;
            if (a && (t *= -1), t < 1e3) return (a ? "-" : "") + l.jsFormControls.Format.decimal(t) + " " + e;
            var i = Math.floor(Math.log(t) / Math.log(1e3)), e = "kmgtpe".charAt(i - 1) + e;
            return (a ? "-" : "") + l.jsFormControls.Format.decimal(Math.round(100 * t / Math.pow(1e3, i)) / 100) + " " + e;
        },
        decimal: function(t) {
            if ("" === t || !t || isNaN(t)) return t;
            var e = {
                format: "#,##0.###",
                groupingSeparator: ",",
                decimalSeparator: "."
            };
            "undefined" != typeof i18n && i18n.number ? e = i18n.number : l(document).data().i18n && l(document).data().i18n.number && (e = l(document).data().i18n.number);
            var a = 0;
            .001 < Math.abs(t - Math.floor(t)) && (a = 2);
            var i = t, s = isNaN(Math.abs(a)) ? 2 : a, n = e.decimalSeparator, r = e.groupingSeparator, a = parseInt(i = Math.abs(+i || 0).toFixed(s), 10) + "", e = 3 < (e = a.length) ? e % 3 : 0;
            return (t < 0 ? "-" : "") + (e ? a.substr(0, e) + r : "") + a.substr(e).replace(/(\d{3})(?=\d)/g, "$1" + r) + (s ? n + Math.abs(i - a).toFixed(s).slice(2) : "");
        },
        integer: function(t) {
            if ("" === t || !t || isNaN(t)) return t;
            var e = {
                format: "#,##0.###",
                groupingSeparator: ",",
                decimalSeparator: "."
            };
            "undefined" != typeof i18n && i18n.number ? e = i18n.number : l(document).data().i18n && l(document).data().i18n.number && (e = l(document).data().i18n.number);
            Math.abs(t - Math.floor(t));
            e.decimalSeparator;
            var a = e.groupingSeparator, i = parseInt(Math.abs(+t || 0).toFixed(0), 10) + "", e = 3 < (e = i.length) ? e % 3 : 0;
            return (t < 0 ? "-" : "") + (e ? i.substr(0, e) + a : "") + i.substr(e).replace(/(\d{3})(?=\d)/g, "$1" + a);
        },
        getDecimal: function(t) {
            return "" === num ? 0 : Number(t);
        },
        getVunit: function(t) {
            return "" === num ? 0 : Number(t);
        },
        percent: function(t) {
            return "" === t || !t || isNaN(t) ? t : l.jsFormControls.Format.decimal(100 * t);
        },
        getPercent: function(t) {
            return "" === t ? 0 : (-1 !== t.indexOf("%") && (t = t.substring(0, t.length - 1)), 
            Number(t) / 100);
        },
        currency: function(t, e, a, i, s) {
            if (!(a = l.jsFormControls.Format._getValue(t, e, a, i))) {
                if (e) return "&#160;";
                a = 0;
            }
            i = l.jsFormControls.Format.decimal(a), e = null, a = null;
            return "undefined" != typeof i18n ? i18n.currency && (e = i18n.currency.prefix, 
            a = i18n.currency.suffix) : l(document).data().i18n && l(document).data().i18n.number && l(document).data().i18n.currency && (e = l(document).data().i18n.currency.prefix, 
            a = l(document).data().i18n.currency.suffix), e && (i = e + i), a && (i += a), i;
        },
        dateTime: function(t, e, a, i, s) {
            return (a = l.jsFormControls.Format._getValue(t, e, a, i)) ? this.date(a) + " " + this.time(a) : e ? "&#160;" : "";
        },
        date: function(t, e, a, i, s) {
            if (!(a = l.jsFormControls.Format._getValue(t, e, a, i)) || "" === a) return e ? "&#160;" : "";
            if (isNaN(a)) return a;
            i = new Date();
            i.setTime(a);
            e = i.getYear();
            e < 1900 && (e += 1900);
            a = null;
            return "undefined" != typeof i18n ? a = i18n.date : l(document).data().i18n && l(document).data().i18n.date && (a = l(document).data().i18n.date), 
            l.format ? l.format.date(i, a.shortDateFormat) : this._pad(i.getDate()) + "." + this._pad(i.getMonth() + 1) + "." + this._pad(e);
        },
        time: function(t, e, a, i, s) {
            if (!(a = l.jsFormControls.Format._getValue(t, e, a, i)) || "" === a) return e ? "&#160;" : "";
            if (isNaN(a)) return a;
            e = new Date();
            e.setTime(a);
            a = "HH:mm";
            return "undefined" != typeof i18n ? i18n.timeFormat ? a = i18n.timeFormat : i18n.date && i18n.date.timeFormat && (a = i18n.date.timeFormat) : l(document).data().i18n && void 0 !== l(document).data().i18n.timeFormat && (a = l(document).data().i18n.timeFormat), 
            l.format ? l.format.date(e, a) : this._pad(e.getHours()) + ":" + this._pad(e.getMinutes());
        },
        timespan: function(t, e, a, i, s) {
            for (var n = (a = (a = l.jsFormControls.Format._getValue(t, e, a, i)) || "0").split(":"), r = 0; r < n.length; r++) {
                var o = Number(n[r]);
                o && "NaN" !== o || (o = 0), n[r] = this._pad(o);
            }
            return n.length <= 0 ? "0:00" : 1 == n.length ? "0:" + this._pad(Math.floor(n[0])) : 2 == n.length ? Math.floor(n[0]) + ":" + this._pad(Math.floor(n[1])) : Math.floor(n[0]) + ":" + this._pad(Math.floor(n[1])) + ":" + pad(Math.floor(n[2]));
        },
        humanTime: function(t, e, a, i, s) {
            if (a = l.jsFormControls.Format._getValue(t, e, a, i), isNaN(a)) return a && 0 !== a.length ? a : "-";
            var n = Math.floor(a / 36e5);
            a -= 36e5 * n;
            t = Math.floor(a / 6e4);
            a -= 6e4 * t;
            e = Math.floor(a / 1e3);
            a -= 1e3 * e;
            i = "";
            return 0 < n && (i += n + "h ", a = e = 0), 0 < t && (i += t + "m ", a = 0), 0 < e && (i += e + "s ", 
            a = 0), 0 < a && (i += a + "ms"), i.trim();
        },
        getHumanTime: function(t) {
            if (!t || "" === t) return 0;
            for (var e = 0, a = "", i = "", s = function() {
                if ("" !== a) {
                    var t = Number(a);
                    switch (i) {
                      case "ms":
                      case "mill":
                        e += t;
                        break;

                      case "s":
                      case "secs":
                        e += 1e3 * t;
                        break;

                      case "":
                      case "m":
                      case "min":
                      case "minute":
                        e += 6e4 * t;
                        break;

                      case "h":
                      case "hour":
                        e += 36e5 * t;
                        break;

                      case "d":
                      case "day":
                      case "days":
                        e += 24 * t * 36e5;
                    }
                    a = i = "";
                }
            }, n = 0; n < t.length; n++) {
                var r = t.charAt(n);
                switch (r) {
                  case "0":
                  case "1":
                  case "2":
                  case "3":
                  case "4":
                  case "5":
                  case "6":
                  case "7":
                  case "8":
                  case "9":
                    "" !== i && s(), a += r;
                    break;

                  case "m":
                  case "i":
                  case "n":
                  case "s":
                  case "h":
                  case "o":
                  case "u":
                  case "r":
                  case "a":
                  case "e":
                  case "c":
                  case "y":
                  case "d":
                    i += r;
                }
            }
            return s(), e;
        }
    };
}(jQuery, window), String.prototype.trim = function() {
    return this.replace(/^\s+|\s+$/g, "");
}, String.prototype.startsWith = function(t) {
    return !(null === this || this.length <= 0) && (!(null === t || "null" == t || t.length <= 0) && this.substr(0, t.length) == t);
}, String.prototype.startsWithIgnoreCase = function(t) {
    return !(null === this || this.length <= 0) && (!(null === t || "null" == t || t.length <= 0) && this.substr(0, t.length).toLowerCase() == t.toLowerCase());
}, String.prototype.endsWith = function(t) {
    return !(null === this || this.length <= 0) && (!(null === t || "null" == t || t.length <= 0 || t.length > this.length) && this.substr(this.length - t.length) == t);
};