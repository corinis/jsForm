/*!
 * jQuery.jsForm v1.5.4 | (c) 2015 Niko Berger http://www.gargan.org/
 * Usage: https://github.com/corinis/jsForm
 */

!function(c, s, l) {
    "use strict";
    var n = {}, r = {};
    function i(t, a) {
        var e = c(t);
        this.options = c.extend({}, {
            controls: !0,
            data: null,
            prefix: "data",
            trackChanges: "changed",
            validateHidden: !0,
            skipEmpty: !1,
            renderer: null,
            processors: null,
            dataHandler: null,
            connect: null,
            viewClass: "jsfValue"
        }, a), !e.attr("data-prefix") || "data" !== this.options.prefix && "" !== this.options.prefix || "" !== e.attr("data-prefix") && (this.options.prefix = e.attr("data-prefix")), 
        this.element = t, this._init();
    }
    i.prototype._init = function() {
        if (this._domInit(), this.options.controls) if (c.jsFormControls) c.each(this._getForm(), function() {
            c(this).jsFormControls();
        }); else try {
            "undefined" != typeof console && this._debug("jquery.JsForm.controls not available!");
        } catch (t) {}
        this._fill();
    }, i.prototype.connect = function(t) {
        this._initCollection(t, this.options.prefix), this._initConditional(t, this.options.prefix, this.options), 
        this.options.controls && c.jsFormControls && c(t).jsFormControls(), this._fillDom(t), 
        this.options.connect || (this.options.connect = []), this.options.connect.push(t);
    }, i.prototype.getNodes = function() {
        return this._getForm();
    }, i.prototype._domInit = function() {
        var t = this;
        c.each(this._getForm(), function() {
            t._initCollection(this, t.options.prefix), t._initConditional(this, t.options.prefix, t.options);
        });
    }, i.prototype._debug = function(t, a) {
        try {
            var e = console || (s ? s.console : null);
            if (!e || !e.log) return;
            var i = null;
            i = (i = c.isPlainObject(a) ? JSON.stringify(a, null, " ") : a) || "", e.log(t + i);
        } catch (t) {}
    }, i.prototype._initConditional = function(t, a, e) {
        function i(t, a, e) {
            var i = !1;
            c.each(e, function() {
                var t = n._getValueWithArrays(a, this);
                if ((!c(n).data().condition || t === c(n).data().condition) && t && "" !== t && 0 !== t && -1 !== t) return !(i = !0);
            }), i ? t.show() : t.hide();
        }
        function s(t, a, e) {
            var i = !1;
            c.each(e, function() {
                var t = n._getValueWithArrays(a, this);
                if ((!c(n).data().condition || t === c(n).data().condition) && t && "" !== t && 0 !== t && -1 !== t) return !(i = !0);
            }), i ? t.hide() : t.show();
        }
        var n = this;
        this.conditionals = c(t).find(".conditional"), this.conditionals.each(function() {
            c(this).data().conditionalEval = [];
            var t = c(this).attr("data-show");
            t && 0 < t.length && c(this).data().conditionalEval.push({
                func: i,
                field: t.split(" ")
            }), (t = c(this).attr("data-hide")) && 0 < t.length && c(this).data().conditionalEval.push({
                func: s,
                field: t.split(" ")
            }), (t = c(this).attr("data-eval")) && 0 < t.length && e.conditionals[t] && c(this).data().conditionalEval.push({
                func: e.conditionals[t]
            });
        });
    }, i.prototype._evaluateConditionals = function(t, a) {
        this.conditionals.each(function() {
            var t = c(this);
            c.each(t.data().conditionalEval, function() {
                this.func(t, a, this.field);
            });
        });
    }, i.prototype._initCollection = function(t, s) {
        var n = {}, r = this;
        c(t).data().collections = n, c(".collection", t).each(function() {
            var e, t, a = c(this).attr("data-field");
            a && 0 === a.indexOf(s + ".") && (e = c(this), (t = n[a]) ? t.push(e) : n[a] = [ e ], 
            r._initList(e), !e.hasClass("ui-sortable") && e.hasClass("sortable") && e.sortable && (a = (a = e.attr("data-sortable")) ? JSON.parse(a) : {}, 
            e.sortable(a), e.on("sortstop", function(t, a) {
                r._reorder(e);
            })), c(this).on("add", function(t, a, e) {
                var i, s = c(this).attr("data-field");
                e && s != e || (a = a || {}, (e = c(this).data("template")) && (e = e.clone(!0), 
                c(e).addClass("POJO"), c(e).data().pojo = a, (a = (a = c(this).data("prefill")) || c(this).val("data-prefill")) && (c.isFunction(a) ? a(c(e).data().pojo, c(e)) : a.substring ? c(e).data().pojo = JSON.parse(a) : c.isPlainObject(a) && (c(e).data().pojo = a)), 
                r._enableTracking(c("input,textarea,select", e)), r.options.trackChanges && c("input,textarea,select", e).addClass(r.options.trackChanges), 
                r._addCollectionControls(e), r._initCollection(e, s.substring(s.indexOf(".") + 1)), 
                c(this).trigger("addCollection", [ e, c(e).data().pojo ]), i = c(this).children(".POJO").length, 
                c(e).on("refresh", function() {
                    r._fillFieldData(c(this), c(this).data().pojo, s.substring(s.indexOf(".") + 1), i + 1), 
                    r._fillData(c(this), c(this).data().pojo, s.substring(s.indexOf(".") + 1), i + 1);
                }).trigger("refresh"), c(this).append(e), c(this).trigger("postAddCollection", [ e, c(e).data().pojo ])));
            }));
        }), c(".add", t).each(function() {
            var a = c(this).attr("data-field");
            a && 0 === a.indexOf(s + ".") && (c(this).data().collections = n[a], c(this).data().hasJsForm || (c(this).data().hasJsForm = !0, 
            c(this).click(function(t) {
                t.preventDefault(), c.each(c(this).data("collections"), function() {
                    c(this).trigger("add", [ null, a ]);
                });
            })));
        }), c(".insert", t).each(function() {
            var i = c(this).attr("data-field");
            i && 0 === i.indexOf(s + ".") && (c(this).data().isCollection || (c(this).data().isCollection = !0, 
            c(this).data("collections", n[c(this).attr("data-field")]), c(this).on("insert", function(t, e) {
                var a;
                (e = e || c(this).data().pojo) && ((a = c(this).data("beforeInsert")) && c.isFunction(a) && !(e = a(e)) || (c.each(c(this).data("collections"), function() {
                    var t, a = c(this).data("template");
                    a && ((a = a.clone(!0)).addClass("POJO"), a.data().pojo = e, r._addCollectionControls(a), 
                    r._initCollection(a), c(this).trigger("addCollection", [ a, e ]), t = c(this).children(".POJO").length, 
                    c(a).on("refresh", function() {
                        r._fillFieldData(c(this), c(this).data().pojo, i.substring(i.indexOf(".") + 1), t), 
                        r._fillData(c(this), c(this).data().pojo, i.substring(i.indexOf(".") + 1), t);
                    }).trigger("refresh"), c(this).append(a), c(this).trigger("postAddCollection", [ a, e ]));
                }), c(this).val(""), c(this).data().pojo = null, c(this).focus()));
            })));
        }), c(".insertAction", t).each(function() {
            var t;
            c(this).attr("data-field") && (c(this).data("inserter") || (t = c(this).parent().find(".insert")) && (c(this).data("inserter", t), 
            c(this).click(function(t) {
                return t.preventDefault(), c(this).data("inserter").trigger("insert"), !1;
            })));
        }), c("input.object", t).each(function() {
            c(this).on("update", function(t) {
                var a = c(this).data().pojo;
                (c(this).attr("data-display") || c(this).attr("data-render")) && c(this).val(r._renderObject(a, c(this).attr("data-display"), c(this).attr("data-render")));
            });
        }), c("input.blob", t).each(function() {
            var e;
            "file" === c(this).attr("type") && (e = c(this), c(this).on("change", function(t) {
                var a = c(this).val().split(/\\/).pop();
                e.data("name", a);
                t = t.target.files;
                t && t.length && c.each(t, function() {
                    var t = new FileReader();
                    t.onload = function(t) {
                        e.data("blob", t.target.result);
                    }, t.readAsDataURL(this), c(this).trigger("fileChange");
                });
            }));
        });
    }, i.prototype._initList = function(t) {
        var a;
        t.data("template") || ((a = t.children().detach()).removeAttr("id"), t.data("template", a));
    }, i.prototype._getForm = function() {
        var t = [ c(this.element) ];
        return this.options.connect && c.each(this.options.connect, function() {
            t.push(c(this));
        }), t;
    }, i.prototype._clear = function(t, a) {
        a = a || this.options.prefix, c(t).removeData("pojo"), c("input,select,textarea", t).each(function() {
            var t = c(this).attr("name");
            t && 0 === t.indexOf(a + ".") && ((t = t.substring((a + ".").length)).length < 1 || (c(this).removeData("pojo"), 
            "checkbox" === c(this).attr("type") || "radio" === c(this).attr("type") ? c(this).prop("checked", !1) : c(this).data().valclass && c(this)[c(this).data().valclass].val ? c(this)[c(this).data().valclass](val, "") : c(this).val(""), 
            c(this).hasClass("blob") && c(this).removeData("blob"), c(this).is("select") && (c('option[selected="selected"]', this).prop("selected", !1), 
            c("option:first", this).prop("selected", !0), c(this).val(c("option:first", this).val()), 
            c(this).change()), c(this).change()));
        }), c(".collection", t).each(function() {
            var t = c(this).attr("data-field");
            t && 0 === t.indexOf(a + ".") && c(this).empty();
        });
    }, i.prototype._handleArrayInPojo = function(t, e, i, s) {
        var n, r;
        e[i] || (e[i] = []), "checkbox" === t.attr("type") || "CHECKBOX" === t.attr("type") ? (n = t.is(":checked"), 
        r = !0, c.each(e[i], function(t, a) {
            if (this == s) return r = !1, n || e[i].splice(a, 1), !1;
        }), r && n && e[i].push(s)) : null === (t = !(t = t.attr("data-array")) || isNaN(t) ? null : Number(t)) ? e[i].push(s) : e[i][t] = s;
    }, i.prototype._setPojoVal = function(t, a, e, i) {
        if (-1 === a.indexOf(".")) i && i.hasClass("array") ? this._handleArrayInPojo(i, t, a, e) : t[a] = e; else {
            var s, n = a.split("."), r = t[n[0]];
            r && c.isPlainObject(r) || (t[n[0]] = {}, r = t[n[0]]);
            for (var o = 1; o < n.length - 1; o++) (r = (s = r)[n[o]]) !== l && null !== r || (s[n[o]] = r = {});
            s = n[n.length - 1], i && i.hasClass("array") ? this._handleArrayInPojo(c(this), r, s, e) : r[s] = e;
        }
    }, i.prototype._createPojoFromInput = function(t, n, r) {
        var a = null, o = this, s = null;
        return (a = c(t).data("pojo") ? c(t).data("pojo") : a) && c.extend(!0, r, a), c(t).find("input,select,textarea,button,.jsobject").each(function() {
            var t = c(this).attr("data-name");
            if ((t = t || c(this).attr("name")) && !c(this).hasClass("transient") && !c(this).hasClass("grayed") && 0 === t.indexOf(n + ".")) {
                c(this).trigger("validate", !0);
                var a, e, t = t.substring((n + ".").length), i = c(this).val();
                if (c(this).data().valclass && c(this)[c(this).data().valclass] && (i = c(this)[c(this).data().valclass]("val")), 
                c(this).hasClass("jsobject")) i = c(this).data().pojo; else {
                    if (o.options.skipEmpty && (!i || "" === i || "" === i.trim())) return;
                    if (!c(this).hasClass("emptynull") || i && "" !== i && "null" !== i && "" !== i.trim() ? c(this).hasClass("object") || c(this).hasClass("POJO") ? (c("option:selected", this).data() && c("option:selected", this).data().pojo ? c("option:selected", this).data().pojo ? i = c("option:selected", this).data().pojo : c("option:selected", this).attr("data-obj") && (i = JSON.parse(c("option:selected", this).attr("data-obj"))) : i = c(this).data().pojo, 
                    i && c(this).data().onylfield && (a = i[c(this).data().onylfield], (i = {})[c(this).data().onylfield] = a), 
                    c.isFunction(c(this).data().processor) ? i = c(this).data().processor(i) : (e = c(this).attr("data-processor")) && o.options.processors[e] && (i = o.options.processors[e](i))) : c(this).hasClass("blob") ? i = c(this).data("blob") : "" === i && (c(this).hasClass("number") || c(this).hasClass("percent") || c(this).hasClass("integer") || c(this).hasClass("dateFilter") || c(this).hasClass("dateTimeFilter")) && (i = null) : i = null, 
                    c(this).data().processor) i = c(this).data().processor(i); else if (c(this).hasClass("number") || c(this).hasClass("integer")) i = c(this).hasClass("date") && isNaN(i) ? c.format ? ((e = c.format.date(i)).setHours(0), 
                    e.setMinutes(0), e.setSeconds(0), e.setMilliseconds(0), e.getTime()) : new Date(i).getTime() : o._getNumber(i), 
                    isNaN(i) && (i = 0); else if ("checkbox" === c(this).attr("type") || "CHECKBOX" === c(this).attr("type")) c(this).hasClass("array") ? (i = c(this).val(), 
                    c(this).attr("data-obj") && (i = JSON.parse(c(this).attr("data-obj")))) : i = c(this).is(":checked"); else if ("radio" === c(this).attr("type") || "RADIO" === c(this).attr("type")) {
                        if (!c(this).is(":checked")) return;
                        (c(this).hasClass("bool") || c(this).hasClass("boolean")) && (i = "true" === c(this).val());
                    } else if (c(this).hasClass("bool")) i = "true" === c(this).val(); else if (c(this).hasClass("boolean")) switch (c(this).val()) {
                      case "true":
                        i = !0;
                        break;

                      case "false":
                        i = !1;
                        break;

                      default:
                        i = null;
                    }
                }
                if (o.options.dataHandler && (i = o.options.dataHandler.serialize(i, c(this), r)), 
                t.length < 1) return s = i, !1;
                o._setPojoVal(r, t, i, c(this));
            }
        }), c(t).find(".selectcollection").each(function() {
            var a, e, i, s = c(this).attr("data-field");
            s && (c(this).hasClass("transient") || 0 === s.indexOf(n + ".") && (c(this).trigger("validate", !0), 
            s = s.substring((n + ".").length), a = [], e = c(this).attr("data-selected"), i = c(this).attr("data-id"), 
            c(this).children().each(function() {
                if (e) {
                    if (!c(this).hasClass(e)) return;
                } else if (!c("input[name='" + s + "']", this).prop("checked")) return;
                var t = null;
                i || c("input[name='" + s + "']", this).hasClass("obj") ? !(t = c(this).data("obj")) && c(this).attr("data-obj") && (t = JSON.parse(c(this).attr("data-obj"))) : t = c("input[name='" + s + "']", this).val(), 
                t && a.push(t);
            }), o._setPojoVal(r, s, a)));
        }), s;
    }, i.prototype._enableTracking = function(t) {
        var a;
        !t || 0 === t.length || (a = this).options.trackChanges && !c(t).data().track && (c(t).data().track = !0, 
        c(t).change(function() {
            c(this).val() !== c(this).data().orig ? c(this).addClass(a.options.trackChanges) : c(this).removeClass(a.options.trackChanges);
        }));
    }, i.prototype._fillSelectCollection = function(t, a, e, i) {
        var l = this;
        c(t).find(".selectcollection").each(function() {
            var s, n, r = c(this).attr("data-selected"), o = c(this).attr("data-id"), t = c(this).attr("data-field");
            t && 0 === t.indexOf(e + ".") && (s = null, n = t, e && (n = n.substring(e.length + 1)), 
            (s = l._get(a, n)) && c.isArray(s) || (s = []), r && (c(this).children("." + r).removeClass(r), 
            c(this).children().each(function() {
                c(this).hasClass("jsfselect") || (c(this).addClass("jsfselect"), c(this).click(function() {
                    c(this).toggleClass(r), c(this).trigger("selected");
                }), c(this).trigger("selected"));
            })), c("input[name='" + n + "']", this).prop("checked", !1), c(this).children().each(function() {
                var t = "";
                if (o) {
                    var a = c(this).data("obj");
                    if (!(a = !a && c(this).attr("data-obj") ? JSON.parse(c(this).attr("data-obj")) : a)) return;
                    t = a[o];
                } else t = c("input[name='" + n + "']", this).val();
                if (t) for (var e = 0; e < s.length; e++) {
                    var i = s[e];
                    if (t == (i = o && i ? i[o] : i)) return r && c(this).addClass(r).trigger("selected"), 
                    void c("input[name='" + n + "']", this).prop("checked", !0);
                }
            }));
        });
    }, i.prototype._fillFieldData = function(t, s, n, r) {
        var o = this, t = c(t);
        0 < n.indexOf(".") && (n = n.substring(n.indexOf(".") + 1)), t.find(".templatefield").each(function() {
            var t = c(this).data().attr, a = c(this).data().mustache;
            a || ("undefined" != typeof Hogan ? a = Hogan.compile(c(this).data().template.replace(/\[\[/g, "{{").replace(/]]/g, "}}")) : "undefined" != typeof Handlebars ? a = {
                render: Handlebars.compile(c(this).data().template.replace(/\[\[/g, "{{").replace(/]]/g, "}}"))
            } : console.error("No mustache renderer found. templating not available (include Handlebars.js or Hogan.js)"), 
            c(this).data().mustache = a);
            var e = {
                data: o.options.data,
                cur: s
            };
            c(this).attr(t, a.render(e));
        }), t.find(".field").each(function() {
            var t, a = (a = c(this).data().name) || c(this).data().field, e = (e = c(this).attr("data-prefix")) || "", i = (i = c(this).attr("data-postfix")) || "";
            a || ("A" === this.nodeName.toUpperCase() ? (a = c(this).attr("href"), c(this).attr("href", "#")) : "IMG" === this.nodeName.toUpperCase() ? (0 === (a = c(this).attr("src")).indexOf("#") && (a = a.substring(1)), 
            c(this).attr("src", "#")) : a = c(this).text(), c(this).data("name", a), c(this).show()), 
            (!n || 0 <= a.indexOf(n + ".")) && (t = a, n && (t = t.substring(n.length + 1)), 
            (a = o._get(s, t, !1, r)) || 0 === a || !1 === a ? "" !== a && ("" !== e && (a = e + a), 
            "" !== i && (a += i)) : a = "", c(this).hasClass("currency") && (a = a || 0), c(this).hasClass("titleval") && c(this).attr("title", a), 
            c(this).hasClass("setObj") ? (c(this).data().pojo = a, c(this).addClass("POJO")) : (o.options.dataHandler && (a = o.options.dataHandler.deserialize(a, c(this), t, s)), 
            c.jsFormControls && (a = c.jsFormControls.Format.format(this, a)), "A" === this.nodeName.toUpperCase() ? c(this).attr("href", a) : "IMG" === this.nodeName.toUpperCase() ? c(this).attr("src", a) : "DIV" === this.nodeName.toUpperCase() || c(this).hasClass("noescape") ? c(this).html(a) : c(this).text(a)));
        });
    }, i.prototype._fillData = function(t, n, r, o) {
        var l = this, t = c(t);
        0 < r.indexOf(".") && (r = r.substring(r.indexOf(".") + 1)), t.data().refresh || (t.data().refresh = !0, 
        t.on("refresh", function() {
            var t = c(this).data().pojo;
            t && l._fillData(c(this), t, r, o);
        })), c("input,textarea,button", t).each(function() {
            var t = c(this).attr("name");
            if (t && (l._enableTracking(this), !r || 0 <= t.indexOf(r + "."))) {
                var a = t;
                r && (a = a.substring(r.length + 1));
                var e, i, s, t = l._get(n, a, !1, o);
                if (l.options.dataHandler && (t = l.options.dataHandler.deserialize(t, c(this), a, n)), 
                "file" == c(this).attr("type")) return c(this).data().pojo = t, void c(this).addClass("POJO");
                c(this).hasClass("object") ? (c(this).data().pojo = t, c(this).addClass("POJO"), 
                t = l._renderObject(t, c(this).attr("data-display"), c(this).attr("data-render"))) : c(this).hasClass("jsobject") ? (c(this).data().pojo = t, 
                c(this).addClass("POJO")) : c.isPlainObject(t) && (t = "" === a ? "" : (c(this).data().pojo = t, 
                c(this).addClass("POJO"), l._renderObject(t, c(this).attr("data-display"), c(this).attr("data-render")))), 
                "checkbox" === c(this).attr("type") ? c(this).hasClass("array") ? (e = c(this).val(), 
                i = null, c(this).attr("data-obj") && (e = JSON.parse(c(this).attr("data-obj"))), 
                c(this).attr("data-id") && (i = c(this).attr("data-id"), e = e[i]), s = !1, t && c.each(t, function() {
                    var t = this;
                    if ((t = i ? t[i] : t) == e) return !(s = !0);
                }), c(this).prop("checked", s)) : c(this).prop("checked", !0 === t || "true" === t) : "radio" === c(this).attr("type") ? c(this).hasClass("bool") ? c(this).prop("checked", t + "" === c(this).val()) : c(this).prop("checked", t == c(this).val()) : (t || 0 === t || !1 === t || (t = ""), 
                c.jsFormControls && (t = c.jsFormControls.Format.format(this, t)), c(this).hasClass("array") ? null !== (a = !(a = c(this).attr("data-array")) || isNaN(a) ? null : Number(a)) && t && t.length > a ? c(this).val(t[a]) : c(this).val("") : c(this).data().valclass && c(this)[c(this).data().valclass] ? t.toDate ? c(this)[c(this).data().valclass]("val", t.toDate()) : c(this)[c(this).data().valclass]("val", t) : c(this).val(t)), 
                l.options.trackChanges && (c(this).data().orig = c(this).val()), c(this).trigger("fill"), 
                c(this).change();
            }
        }), c("select", t).each(function() {
            var t = c(this).attr("name");
            if (t && (!r || 0 <= t.indexOf(r + "."))) {
                t = t;
                r && (t = t.substring(r.length + 1)), l._enableTracking(this), c(this).children("option:selected").prop("selected", !1);
                var a = (a = c(this).attr("data-key")) || "id", e = l._get(n, t, !1, o);
                if ((e = l.options.dataHandler ? l.options.dataHandler.deserialize(e, c(this), t, n) : e)[a] || !isNaN(e[a])) return c(this).find("option").each(function() {
                    var t = c(this).data().pojo;
                    if (t = t || c(this).data().obj) {
                        if (e[a] === t[a]) return c(this).prop("selected", !0), !1;
                    } else if (c(this).val() == e[a]) return c(this).attr("selected", !0), !1;
                }), void c(this).change().removeClass("changed");
                c(this).hasClass("bool") ? e = e ? "true" : "false" : c(this).hasClass("boolean") && (e = !1 === e ? "false" : e ? "true" : ""), 
                c(this).find("option[value='" + e + "']").prop("selected", !0), c(this).val(e), 
                l.options.trackChanges && (c(this).data().orig = c(this).val()), c(this).change().trigger("fill").removeClass("changed");
            }
        });
    }, i.prototype.get = function(t) {
        var a = this, e = this.options.data, i = this.options.prefix, s = {};
        e && c.isPlainObject(e) && (s = c.extend({}, e));
        var n = !1;
        return c.each(this._getForm(), function() {
            a._createPojoFromInput(this, i, s), a.options.validateHidden ? this.find(".invalid").each(function() {
                return console.log("Invalid: " + c(this).attr("name")), n = !0, c(this).focus(), 
                !1;
            }) : this.find(".invalid").filter(":visible").each(function() {
                return console.log("Invalid: " + c(this).attr("name")), n = !0, c(this).focus(), 
                t || a._debug("Found invalid field: " + c(this).attr("name")), !1;
            }), a._getCollection(this, i, s, t) && (n = !0);
        }), !t && n ? null : s;
    }, i.prototype._getCollection = function(t, a, s, n) {
        var r = this, o = !1;
        return t.find(".collection").each(function() {
            var e, i;
            !n && o || c(this).hasClass("transient") || (e = c(this).attr("data-field")) && 0 === e.indexOf(a + ".") && (e = e.substring((a + ".").length), 
            i = r._getParent(s, e, !0), -1 !== e.indexOf(".") && (e = e.substring(e.lastIndexOf(".") + 1)), 
            i[e] = [], c(this).children().each(function() {
                var t = {}, a = r._createPojoFromInput(c(this), e, t);
                if (a || r._getCollection(c(this), e, t, n), !r._isEmpty(t) || a) {
                    if (0 < c(".invalid", this).length && (o = !0, !n)) return !1;
                    a ? i[e].push(a) : i[e].push(t);
                } else c(".invalid", this).removeClass("invalid");
            }));
        }), o;
    }, i.prototype.getData = function() {
        return this.options.data || (this.options.data = {}), this.options.data;
    }, i.prototype.fieldMode = function(t, a) {
        var e;
        t && (t.data || (t = c("input[name='" + t + "']", this.element)), e = this.options.viewClass, 
        a ? t.closest("span." + e)[0] || ("null" !== (a = t.val()) && null !== a && "submit" !== t.attr("type") || (a = ""), 
        a = (a = t.hasClass("trueFalse") ? t.is(":checked") ? "X" : "&#160;" : a).replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/\n/g, "<br/>"), 
        a = c('<span class="' + e + '">' + a + "</span>"), (t.parent().hasClass("ui-wrapper") ? t.parent() : t).hide().wrap(a)) : (e = t.closest("span." + e), 
        t = t.show().detach(), e.before(t), e.remove()));
    }, i.prototype.preventEditing = function(t) {
        var a = c(this.element), e = this.options.viewClass;
        if (void 0 === t) t = !a.data("disabled"); else if (t === a.data("disabled")) return;
        t ? (a.find("input, textarea").each(function() {
            var t, a;
            c(this).closest("span." + e)[0] || "hidden" != c(this).attr("type") && ("null" !== (t = c(this).val()) && null !== t && "submit" !== c(this).attr("type") || (t = ""), 
            c(this).hasClass("trueFalse") && (t = c(this).is(":checked") ? "X" : "&#160;"), 
            c(this).hasClass("noescape") ? (a = c('<div class="' + e + '">' + t + "</div>")).html(t) : (t = t.replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/\n/g, "<br/>"), 
            a = c('<span class="' + e + '">' + t + "</span>")), (c(this).parent().hasClass("ui-wrapper") ? c(this).parent() : c(this)).hide().before(a));
        }), a.find("select").each(function() {
            var t;
            c(this).closest("span." + e)[0] || (t = c(this).children(":selected").html(), t = c('<span class="' + e + '">' + (t = "null" === t || null === t ? "" : t) + "</span>"), 
            (c(this).hasClass("ui-toggle-switch") ? c(this).prev() : c(this)).hide().before(t));
        })) : a.find("span." + e + ",div." + e).each(function() {
            c(this).next("input,select,textarea,.ui-wrapper,.ui-toggle-switch").show();
            c(this).remove();
        }), a.data("disabled", t);
    }, i.prototype.validate = function() {
        var t = !0;
        return c.each(this._getForm(), function() {
            c(".required,.regexp,.date,.mandatory,.number,.validate,.integer", this).change(), 
            0 < c(".invalid", this).length && (t = !1);
        }), t;
    }, i.prototype._fill = function(t) {
        var a = this;
        c(this.element).addClass("POJO"), c(this.element).data("pojo", this.options.data), 
        c.each(this._getForm(), function() {
            try {
                a._fillDom(this, t);
            } catch (t) {
                console.log("Exception while filling form", t);
            }
        }), c(this.element).trigger("filled");
    }, i.prototype._fillDom = function(t, a) {
        var e = this;
        a || e._clear(t, e.options.prefix), e._fillFieldData(t, e.options.data, e.options.prefix), 
        a || (e._fillData(t, e.options.data, e.options.prefix), e._fillSelectCollection(t, e.options.data, e.options.prefix)), 
        e._fillCollection(t, e.options.data, e.options.prefix, a), e._evaluateConditionals(t, e.options.data);
    }, i.prototype._fillCollection = function(t, o, l, h) {
        var d = this;
        c(".collection", t).each(function() {
            var t = c(this), a = c(this).attr("data-field");
            if (o && a && 0 === a.indexOf(l + ".")) {
                var e, i = a;
                if (l && (i = i.substring(l.length + 1)), e = d._get(o, i)) if (h) for (var s = 0; s < e.length; s++) {
                    -1 !== i.indexOf(".") && (l = i.substring(i.lastIndexOf(".") + 1));
                    var n = c(t.children().get(s)), r = e[s];
                    d._fillFieldData(n, r, i, s + 1), d._fillCollection(n, r, i, h);
                } else d._fillList(t, e, i);
            }
        });
    }, i.prototype._fillList = function(t, a, e, i) {
        var s = t.data("template");
        if (s && (t.empty(), c.isArray(a))) {
            if (-1 !== e.indexOf(".") && (e = e.substring(e.lastIndexOf(".") + 1)), t.hasClass("sort")) {
                var n = t.attr("data-sort");
                if (n) {
                    switch (t.attr("data-sorttype")) {
                      case "alpha":
                        a.sort();
                        break;

                      case "alphainsensitiv":
                        a.sort(function(t, a) {
                            return t = t[n], a = a[n], (t = t && t.toLowerCase()) < (a = a && a.toLowerCase()) ? -1 : a < t ? 1 : 0;
                        });
                        break;

                      default:
                        a.sort(function(t, a) {
                            return t[n] - a[n];
                        });
                    }
                    t.attr("data-sortdesc") && a.reverse();
                }
            }
            i || c.isFunction(e) && (i = e, e = null);
            for (var r = 0; r < a.length; r++) {
                var o = a[r], l = s.clone(!0);
                l.data().pojo = o, l.addClass("POJO"), i && !1 === i(l, o) || (this._fillLine(t, o, l, e, r), 
                t.append(l), t.trigger("postAddCollection", [ l, c(l).data().pojo ]));
            }
        }
    }, i.prototype._fillLine = function(t, a, e, i, s) {
        var n = this;
        n._addCollectionControls(e), t.trigger("addCollection", [ e, a ]), i && (c(e).on("refresh", function() {
            n._fillFieldData(c(this), c(this).data().pojo, i, s + 1), n._fillData(c(this), c(this).data().pojo, i, s + 1);
        }).trigger("refresh"), n._initCollection(e, i), n._fillCollection(e, a, i));
    }, i.prototype._addCollectionControls = function(t) {
        var i = this, a = c(t).closest(".collection");
        c.jsFormControls && c(t).jsFormControls(), t.on("delete", function(t, a) {
            var e, i;
            a && a[0] !== this || (e = c(this), i = c(e).data().pojo, a = c(this).closest(".collection"), 
            e.detach(), c(a).trigger("deleteCollection", [ e, i ]));
        }), t.on("sortUp", function(t, a) {
            var e;
            a && a[0] !== this || 0 !== (a = (e = c(this)).prev(".POJO")).size() && (e.detach(), 
            a.before(e), i._reorder(e));
        }), t.on("sortDown", function(t, a) {
            var e;
            a && a[0] !== this || 0 !== (a = (e = c(this)).next(".POJO")).size() && (e.detach(), 
            a.after(e), i._reorder(e));
        }), c(".delete", t).click(function() {
            var t = c(this).closest(".POJO");
            t.trigger("delete", [ t ]);
        }), c(".sortUp", t).click(function() {
            var t = c(this).closest(".POJO");
            t.trigger("sortUp", [ t ]);
        }), c(".sortDown", t).click(function() {
            var t = c(this).closest(".POJO");
            t.trigger("sortDown", [ t ]);
        }), a.hasClass("sortable") && c(a).sortable && a.sortable("refresh");
    }, i.prototype._reorder = function(t) {
        t.attr("data-sort") || (t = t.closest(".collection"));
        var a, e = c(t).attr("data-sort");
        !e || c(t).attr("data-sorttype") && "number" !== c(t).attr("data-sorttype") || c(t).attr("data-sortdesc") && "false" !== c(t).attr("data-sortdesc") || (a = 0, 
        c.each(c(t).children(), function() {
            var t = c(this).data("pojo");
            t || (t = {}, c(this).data("pojo", t)), t[e] = a++;
        }));
    }, i.prototype._renderObject = function(a, t, e) {
        if (!a || !t && !e) return "";
        if (e) return this.options.renderer && this.options.renderer[e] ? this.options.renderer[e](a) : (this._debug("Unable to find renderer: " + e), 
        "");
        var i = this, s = "";
        return c.each(t.split(","), function() {
            var t = this.trim();
            0 === t.indexOf("'") || 0 === t.indexOf('"') ? s += t.substring(1, t.length - 1) : s += i._get(a, t);
        }), s;
    }, i.prototype._get = function(t, a, e, i) {
        var s, n, r, o = "";
        if ("function" == typeof a) return a(t);
        if (!t) return "";
        if ("" === a) return t;
        if ("$idx" === a) return i;
        if (!(s = t[a])) try {
            if (r = (o = "string" == typeof a ? a.split(".") : o).length) for (s = t; s && r--; ) n = o.shift(), 
            e && !s[n] && (s[n] = {}), s = s[n];
        } catch (t) {}
        return (s = null === s || s === l ? "" : s).trim ? s.trim() : s;
    }, i.prototype._getValueWithArrays = function(t, a) {
        if (null === t) return null;
        a = a.split(".");
        for (var e = /(.*)\[(\d+)\]/, i = 1; i < a.length; i++) {
            var s = e.exec(a[i]);
            try {
                t = s ? t[s[1]][parseInt(s[2], 10)] : t[a[i]];
            } catch (t) {
                this._debug(a + " " + t);
            }
        }
        return t;
    }, i.prototype._getParent = function(t, a, e) {
        return -1 === a.indexOf(".") ? t : (a = a.substring(0, a.lastIndexOf(".")), this._get(t, a, e));
    }, i.prototype._getNumber = function(t) {
        return t ? c.jsFormControls ? c.jsFormControls.Format._getNumber(t) : (-1 !== t.indexOf(",") && -1 !== t.indexOf(".") ? t = t.replace(new RegExp(",", "g"), "") : -1 !== t.indexOf(",") && -1 === t.indexOf(".") && (t = t.replace(new RegExp(",", "g"), ".")), 
        Number(t)) : null;
    }, i.prototype._isEmpty = function(t) {
        if (!t) return !0;
        if (c.isArray(t)) {
            if (0 === t.length) return !0;
            for (var a = 0; a < t.length; a++) if (!this._isEmpty()) return !1;
            return !0;
        }
        if (c.isPlainObject(t)) {
            if (c.isEmptyObject(t)) return !0;
            for (var e in t) if (!this._isEmpty(t[e])) return !1;
            return !0;
        }
        return isNaN(t) ? "" === t || " " === t : 0 === Number(t) || -1 === Number(t);
    }, i.prototype._equals = function(t, a, e) {
        if (!t && a && a.length && 0 === a.length) return !0;
        if (!a && t && t.length && 0 === t.length) return !0;
        if (!t && !a) return !0;
        var i = null;
        for (i in t) {
            if (void 0 === a[i] && null !== t[i] && "" !== t[i] && 0 !== t[i].length) {
                if (("0" === t[i] || 0 === t[i]) && !a[i]) continue;
                return !1;
            }
            if (t[i]) switch (typeof t[i]) {
              case "object":
                if (e && t[i][e] && t[i][e] === a[i][e]) continue;
                if (!this._equals(t[i], a[i])) return !1;
                break;

              case "function":
                break;

              default:
                if (!t[i] && !a[i]) break;
                if ((!0 === t || !1 === t) && t !== a) return !1;
                if (!isNaN(t[i]) || !isNaN(a[i])) {
                    if (Math.abs(Number(t[i]) - Number(a[i])) < 1e-7) break;
                    return !1;
                }
                if (("" + t[i]).length !== ("" + a[i]).length) return !1;
                if (t[i] !== a[i] && Number(t[i]) !== Number(a[i])) return !1;
            } else if (a[i]) return !1;
        }
        for (i in a) if ((!t || void 0 === t[i]) && null !== a[i] && "" !== a[i]) return !1;
        return !0;
    }, i.prototype.equals = function(t, a) {
        var e = this.get(!1);
        return this._equals(e, t, a);
    }, i.prototype.changed = function() {
        if (!this.options.trackChanges) return !1;
        var t = !1, a = this;
        return c.each(this._getForm(), function() {
            if (0 < c("." + a.options.trackChanges, this).size()) return !(t = !0);
        }), t;
    }, i.prototype.clearChanged = function() {
        var t = this;
        c.each(this._getForm(), function() {
            this.find("." + t.options.trackChanges).removeClass(t.options.trackChanges);
        });
    }, i.prototype.resetChanged = function() {
        if (!this.options.trackChanges) return !1;
        var t = this;
        return c.each(this._getForm(), function() {
            c("." + t.options.trackChanges, this).each(function() {
                c(this).removeClass(t.options.trackChanges), c(this).data().orig = c(this).val();
            });
        }), !1;
    }, i.prototype._equalsCollection = function(t, i, s) {
        var n = this, r = !1;
        return c(".collection", t).each(function() {
            var a, e;
            r || (e = c(this).attr("data-field")) && 0 === e.indexOf(i + ".") && ((e = e.substring((i + ".").length)).length < 1 || (a = 0, 
            c(this).children().each(function() {
                var t;
                r || (a >= s[e].length ? r = !0 : (t = s[e][a++], n._pojoDifferFromInput(c(this), e, t) && (r = !0), 
                n._equalsCollection(c(this), e, t) || (r = !0)));
            }), s[e] && a < s[e].length && (r = !0)));
        }), !r;
    }, i.prototype.fill = function(t) {
        this.options.data = c.extend({}, t), this._fill();
    }, i.prototype.fillFields = function(t) {
        this.options.data = c.extend({}, t), this._fill(!0);
    }, i.prototype.applyConditions = function(t) {
        t = t || this.get(!0), this._evaluateConditionals(this.element, t);
    }, i.prototype.reset = function() {
        this.fill({});
    }, i.prototype.clear = function() {
        var t = this;
        c.each(this._getForm(), function() {
            t._clear(this, t.options.prefix);
        });
    }, i.prototype.destroy = function() {
        return c(this.element).each(function() {
            c(this).removeData("jsForm"), c.jsFormControls && c(this).jsFormControls("destroy");
        });
    }, c.fn.jsForm = function(t) {
        if ("object" != typeof t && t) {
            var a = Array.prototype.slice.call(arguments, 1);
            if (0 === this.length) return null;
            if (1 === this.length) {
                var e = c(this).data("jsForm");
                if (e) return 0 !== t.indexOf("_") && e[t] ? e[t].apply(e, a) : (c.error("Method " + t + " does not exist on jQuery.jsForm"), 
                !1);
            }
            return this.each(function() {
                if (e = c.data(this, "jsForm")) return 0 !== t.indexOf("_") && e[t] ? e[t].apply(e, a) : (c.error("Method " + t + " does not exist on jQuery.jsForm"), 
                !1);
            });
        }
        return this.each(function() {
            c(this).data("jsForm") || c(this).data("jsForm", new i(this, t));
        });
    }, c.jsForm = function(t, a) {
        var e, i, s = r[t];
        c.isFunction(a) ? (s && c.each(s, function() {
            a(this, c(this.element));
        }), n[t] = a) : s && (e = a, i = Array.prototype.slice.call(arguments, 2), c.each(portlets, function() {
            this[e].apply(this, i);
        }));
    };
}(jQuery, window), function(l, r) {
    "use strict";
    var n = {}, o = {};
    function i(t) {
        this.element = t, this._domInit();
    }
    "undefined" != typeof Handlebars && (Handlebars.registerHelper("currency", function(t) {
        return t ? l.jsFormControls.Format.currency(t) : l.jsFormControls.Format.currency(0);
    }), Handlebars.registerHelper("dec", function(t) {
        return t ? l.jsFormControls.Format.decimal(t) : "";
    }), Handlebars.registerHelper("percent", function(t) {
        return t ? l.jsFormControls.Format.decimal(100 * t) : "0";
    }), Handlebars.registerHelper("date", function(t) {
        return t ? l.jsFormControls.Format.date(t) : "";
    }), Handlebars.registerHelper("time", function(t) {
        return t ? l.jsFormControls.Format.time(t) : "";
    }), Handlebars.registerHelper("datetime", function(t) {
        return t ? l.jsFormControls.Format.dateTime(t) : "";
    }), Handlebars.registerHelper("dateTime", function(t) {
        return t ? l.jsFormControls.Format.dateTime(t) : "";
    }), Handlebars.registerHelper("timespan", function(t) {
        return t ? l.jsFormControls.Format.humanTime(t) : "";
    }), Handlebars.registerHelper("humanTime", function(t) {
        return t ? l.jsFormControls.Format.humanTime(t) : "";
    }), Handlebars.registerHelper("byte", function(t) {
        return t ? l.jsFormControls.Format.byte(t) : "";
    }), Handlebars.registerHelper("integer", function(t) {
        return t ? l.jsFormControls.Format.integer(t) : "";
    })), i.prototype._domInit = function() {
        var t = l(this.element);
        t.find("input.mandatory,textarea.mandatory").on("keyup", function() {
            0 < l(this).val().length && "null" !== l(this).val() ? l(this).addClass("valid").removeClass("invalid") : l(this).removeClass("valid").addClass("invalid");
        }), t.find("input.mandatory,textarea.mandatory").on("change", function() {
            l(this).hasClass("object") ? l(this).data().pojo ? l(this).addClass("valid").removeClass("invalid") : l(this).removeClass("valid").addClass("invalid") : 0 < l(this).val().length && "null" !== l(this).val() ? l(this).addClass("valid").removeClass("invalid") : l(this).removeClass("valid").addClass("invalid");
        }).change(), t.find("select.mandatory").change(function() {
            null !== l(this).val() && "null" !== l(this).val() && 0 < l(this).val().length ? l(this).addClass("valid").removeClass("invalid") : l(this).removeClass("valid").addClass("invalid");
        }).change(), t.find("input.date").each(function() {
            var t = null, a = l(this).attr("data-format");
            r.flatpickr ? (l(this), r.flatpickr(l(this)[0], {
                enableTime: !1,
                allowInput: !0,
                time_24hr: !1,
                dateFormat: i18n.flatpickrDate,
                onOpen: [ function(t, a, e) {
                    e.jumpToDate(new Date()), e.setDate(new Date());
                } ]
            })) : l(this).datepicker && (void 0 !== a ? t = a : "undefined" != typeof i18n && (t = i18n.jqdate), 
            t ? l(this).datepicker({
                dateFormat: t
            }) : l(this).datepicker());
        }), t.find("input.dateTime").each(function() {
            var t, a, e, i = null, s = l(this).attr("data-format"), n = l(this);
            r.flatpickr ? r.flatpickr(l(this)[0], {
                enableTime: !0,
                time_24hr: !0,
                allowInput: !0,
                dateFormat: i18n.flatpickrDateTime,
                onOpen: [ function(t, a, e) {
                    var i;
                    "" === n.val() ? e.jumpToDate(new Date()) : (i = l.jsFormControls.Format.asDate(n.val()), 
                    e.jumpToDate(i), e.setDate(i, !0));
                } ]
            }) : n.datetimepicker && n.hasClass("form-control") ? (s ? i = s : "undefined" != typeof i18n && (i = i18n.momentDate), 
            e = "DTID_" + l(this).attr("name").replace(".", "_"), (t = l('<div class="input-group date" data-target-input="nearest"/>')).attr("id", e), 
            n.parent().append(t), n.addClass("datetimepicker-input").attr("data-target", "#" + e), 
            a = l('<div class="input-group-append" data-toggle="datetimepicker"><div class="input-group-text"><i class="fa fa-calendar"></i></div></div>'), 
            t.append(n), t.append(a), a.attr("data-target", "#" + e), i ? l(this).datetimepicker({
                format: "DD.MM.YYYY  HH:mm"
            }) : l(this).datetimepicker()) : l(this).jqxDateTimeInput && (l(this).data().valclass = "jqxDateTimeInput", 
            e = {
                showTimeButton: !0
            }, l(this).attr("data-width") ? e.width = Number(l(this).attr("data-width")) : e.width = l(this).width(), 
            s ? e.formatString = s : ("undefined" != typeof i18n ? i = i18n.date : l(document).data().i18n && l(document).data().i18n.date && (i = l(document).data().i18n.date), 
            e.formatString = i.shortDateFormat + " HH:mm"), l(this).jqxDateTimeInput(e));
        }), t.find("input.time").each(function() {
            l(this).clockpicker && l(this).parent().hasClass("clockpicker") ? (l(this).attr("type", "text"), 
            l(this).parent().clockpicker({
                autoclose: !0
            })) : l(this).datetimepicker ? l(this).datetimepicker() : l(this).jqxDateTimeInput && (l(this).jqxDateTimeInput({
                formatString: "HH:mm",
                showTimeButton: !0,
                showDateButton: !1
            }), l(this).data().valclass = "jqxDateTimeInput");
        });
        var a = new RegExp("^[0-9.,-]+$");
        t.find("input.number").keyup(function() {
            var t = l(this).val();
            0 < (t = l(this).hasClass("currency") && t ? l.jsFormControls.Format._getNumber(t) : t).length && (l(this).hasClass("autoclean") ? l(this).val(t.replace(/[^0-9.,-]/g, "")) : a.test(l(this).val()) ? l(this).addClass("valid").removeClass("invalid") : l(this).removeClass("valid").addClass("invalid"));
        }).keyup(), t.find("input.currency").each(function() {
            l(this).on("change blur", function() {
                var t = l(this).val();
                0 < t.length && l(this).val(l.jsFormControls.Format.currency(l.jsFormControls.Format._getNumber(t)));
            }), l(this).focus(function() {
                var t = l(this).val();
                0 < t.length && l(this).val(l.jsFormControls.Format._getNumber(t)), l(this).select();
            });
        }), t.find("input.percent").change(function() {
            var t = l(this).val();
            0 < t.length && l(this).val(l.jsFormControls.Format.decimal(l.jsFormControls.Format._getNumber(t))), 
            l(this).focus(function() {
                var t = l(this).val();
                0 < t.length && l(this).val(l.jsFormControls.Format._getNumber(t)), l(this).select();
            });
        }), t.find("input.decimal").change(function() {
            var t = l(this).val();
            0 < t.length && l(this).val(l.jsFormControls.Format.decimal(l.jsFormControls.Format._getNumber(t)));
        }), t.find("input.vunit").change(function() {
            var t = l(this).val();
            0 < t.length && (t = l.jsFormControls.Format._getNumber(t), l(this).data().val = t, 
            l(this).val(l.jsFormControls.Format.vunit(t, l(this).attr("data-unit"))));
        });
        var e = new RegExp("^[0-9]+$");
        t.find("input.integer").keyup(function() {
            var t = l(this).val();
            0 < t.length && (l(this).hasClass("autoclean") ? l(this).val(t.replace(/[^0-9]/g, "")) : e.test(l(this).val()) ? l(this).addClass("valid").removeClass("invalid") : l(this).removeClass("valid").addClass("invalid"));
        }).keyup(), t.find("input.regexp").each(function() {
            l(this).keyup(function() {
                l(this).hasClass("autoclean") ? l(this).data("regexp", new RegExp(l(this).attr("data-regexp"), "g")) : l(this).data("regexp", new RegExp(l(this).attr("data-regexp")));
                var t, a = l(this).val();
                0 < a.length ? (t = l(this).data("regexp"), l(this).hasClass("autoclean") ? l(this).val(a.replace(t, "")) : t.test(l(this).val()) ? l(this).addClass("valid").removeClass("invalid") : l(this).removeClass("valid").addClass("invalid")) : l(this).hasClass("mandatory") || l(this).removeClass("invalid").addClass("valid");
            }).keyup(), l(this).change(function() {
                l(this).keyup();
            });
        }), t.find("input.rotatestate").each(function() {
            var t = l(this).attr("data-state-values"), a = l(this).attr("data-state-class");
            if (t) {
                try {
                    t = JSON.parse(t);
                } catch (t) {
                    return;
                }
                var e = l("<span></span>");
                l(this).attr("title") && e.attr("title", l(this).attr("title")), l(this).attr("data-state-style") && e.attr("style", l(this).attr("data-state-style")), 
                e.data("states", t), e.data("control", this), e.data("activeState", null), l(this).data("control", e), 
                a && e.addClass(a), e.click(function() {
                    var t = l(this).data().activeState, a = l(this).data().states, e = l(this).data().control, i = null;
                    if (null !== t) {
                        for (var s = 0; s < a.length; s++) if (a[s].value === t.value) {
                            i = s === a.length - 1 ? a[0] : a[s + 1];
                            break;
                        }
                    } else i = a[0];
                    l(e).attr("value", i.value), l(e).change();
                }), l(this).change(function() {
                    var t = l(l(this).data().control), a = t.data().activeState, e = t.data().states;
                    null !== a && t.removeClass(a.class);
                    var i = l(this).val();
                    l.each(e, function() {
                        if (this.value === i) return (t.data().activeState = this).title && t.attr("title", this.title), 
                        t.addClass(this.class), !1;
                    });
                }), l(this).change(), l(this).after(e), l(this).hide();
            }
        });
    }, i.prototype.validate = function() {
        return l(".required,.regexp,.date,.mandatory,.number,.validate", this.element).change(), 
        !(0 < l(".invalid", this.element).length);
    }, i.prototype.destroy = function() {
        return l(this.element).each(function() {
            l(this).removeData("jsFormControls");
        });
    }, l.fn.jsFormControls = function(a) {
        if ("object" != typeof a && a) {
            var e = Array.prototype.slice.call(arguments, 1);
            if (1 == this.length) {
                var t = l(this).data("jsFormControls");
                if (t) return 0 !== a.indexOf("_") && t[a] ? t[a].apply(t, e) : (l.error("Method " + a + " does not exist on jQuery.jsFormControls"), 
                !1);
            }
            return this.each(function() {
                var t = l.data(this, "jsFormControls");
                if (t) return 0 !== a.indexOf("_") && t[a] ? t[a].apply(t, e) : (l.error("Method " + a + " does not exist on jQuery.jsFormControls"), 
                !1);
            });
        }
        return this.each(function() {
            l(this).data("jsFormControls") || l(this).data("jsFormControls", new i(this));
        });
    }, l.jsFormControls = function(t, a) {
        var e, i, s;
        l.isFunction(a) ? ((s = o[t]) && l.each(s, function() {
            a(this, l(this.element));
        }), n[t] = a) : (s = o[t]) && (e = a, i = Array.prototype.slice.call(arguments, 2), 
        l.each(portlets, function() {
            this[e].apply(this, i);
        }));
    }, l.jsFormControls.Format = {
        format: function(t, a) {
            return l(t).hasClass("dateTime") || l(t).hasClass("datetime") ? isNaN(a) ? a : l.jsFormControls.Format.dateTime(a) : l(t).hasClass("date") ? isNaN(a) ? a : l.jsFormControls.Format.date(a) : l(t).hasClass("time") ? isNaN(a) ? a : l.jsFormControls.Format.time(a) : l(t).hasClass("currency") ? l.jsFormControls.Format.currency(a) : l(t).hasClass("byte") ? isNaN(a) ? a : l.jsFormControls.Format.byte(a) : l(t).hasClass("decimal") ? (l(t).data().processor = l.jsFormControls.Format.getDecimal, 
            l.jsFormControls.Format.decimal(a)) : l(t).hasClass("vunit") ? (l(this).data().val = a, 
            l(t).data().processor = l.jsFormControls.Format.getVunit, l.jsFormControls.Format.vunit(a, l(t).attr("data-unit"))) : l(t).hasClass("percent") ? (l(t).data().processor = l.jsFormControls.Format.getPercent, 
            l.jsFormControls.Format.percent(a)) : l(t).hasClass("humantime") ? (l(t).data().processor = l.jsFormControls.Format.getHumanTime, 
            l.jsFormControls.Format.humanTime(a)) : l(t).hasClass("timespan") ? l.jsFormControls.Format.timespan(a) : a;
        },
        _getValue: function(t, a, e, i, s) {
            return void 0 === a && void 0 === e ? t : isNaN(t) || void 0 === a || void 0 === e ? void 0 : e;
        },
        checkBox: function(t, a, e, i, s) {
            return (e = l.jsFormControls.Format._getValue(t, a, e, i)) ? '<span class="ui-icon ui-icon-check">&nbsp;</span>' : '<span class="ui-icon ui-icon-close">&nbsp;</span>';
        },
        _getNumber: function(t) {
            if (!t) return null;
            var a = {
                format: "#,##0.###",
                groupingSeparator: ",",
                decimalSeparator: "."
            }, e = null, i = null;
            "undefined" != typeof i18n && i18n.number ? (a = i18n.number, i18n.currency && (e = i18n.currency.prefix, 
            i = i18n.currency.suffix)) : l(document).data().i18n && l(document).data().i18n.number && (a = l(document).data().i18n.number, 
            l(document).data().i18n.currency && (e = l(document).data().i18n.currency.prefix, 
            i = l(document).data().i18n.currency.suffix)), t = "" + t, e && 0 < e.length && 0 === t.indexOf(e) && (t = t.substring(e.length)), 
            i && 0 < i.length && 0 < t.indexOf(i) && (t = t.substring(0, t.length - i.length));
            i = (t = l.trim(t)).indexOf(a.groupingSeparator);
            return -1 !== i && (i >= t.length - 3 ? (console.log("gs looks like decimal: "), 
            "." !== a.groupingSeparator && (t = t.replace(new RegExp(a.groupingSeparator, "g"), "."))) : t = t.replace(new RegExp("\\" + a.groupingSeparator, "g"), "")), 
            "." !== a.decimalSeparator && -1 !== t.indexOf(a.decimalSeparator) && "." !== a.decimalSeparator && (t = t.replace(new RegExp(a.decimalSeparator, "g"), ".")), 
            Number(t);
        },
        _pad: function(t) {
            var a = t < 10 ? "0" : "";
            return a += t;
        },
        asDate: function(t) {
            t = l.jsFormControls.Format.asMoment(t);
            return t ? t.toJSDate ? t.toJSDate() : t.toDate || t : null;
        },
        asMoment: function(e) {
            var i = null, t = [ i18n.date.format + " " + i18n.date.timeFormat, i18n.date.dateTimeFormat, i18n.date.format, i18n.date.longDateFormat, i18n.date.timeFormat ];
            if (e.toFormat) return e;
            if ("undefined" != typeof luxon) return isNaN(e) ? (t.forEach(function(t) {
                if (i) return !1;
                try {
                    var a = luxon.DateTime.fromFormat(e, t);
                    if (a.isValid) return i = a, !1;
                } catch (t) {}
            }), i = i || luxon.DateTime.fromISO(e)) : luxon.DateTime.fromMillis(e);
            if ("undefined" != typeof moment) {
                for (var a = 0; a < t.length; a++) t[a] = moment().toMomentFormatString(t[a]);
                l.each(t, function() {
                    if (i) return !1;
                    var t = moment(e, this, !0);
                    return t.isValid() ? (i = t, !1) : void 0;
                }), i = i || moment(e);
            }
            return i ? (i.toFormat = i.format, i) : new Date(e);
        },
        asNumber: function(t) {
            return l.jsFormControls.Format._getNumber(t);
        },
        byte: function(t) {
            if ("" === t || !t || isNaN(t)) return t;
            if (t < 1024) return t + " B";
            var a = Math.floor(Math.log(t) / Math.log(1024)), e = "KMGTPE".charAt(a - 1) + "B";
            return Math.round(10 * t / Math.pow(1024, a)) / 10 + e;
        },
        vunit: function(t, a) {
            if ("" === t || !t || isNaN(t)) return t;
            var e = t < 0;
            if (e && (t *= -1), t < 1e3) return (e ? "-" : "") + l.jsFormControls.Format.decimal(t) + " " + a;
            var i = Math.floor(Math.log(t) / Math.log(1e3)), a = "kmgtpe".charAt(i - 1) + a;
            return (e ? "-" : "") + l.jsFormControls.Format.decimal(Math.round(100 * t / Math.pow(1e3, i)) / 100) + " " + a;
        },
        decimal: function(t) {
            if ("" === t || !t || isNaN(t)) return t;
            var a = {
                format: "#,##0.###",
                groupingSeparator: ",",
                decimalSeparator: "."
            };
            "undefined" != typeof i18n && i18n.number ? a = i18n.number : l(document).data().i18n && l(document).data().i18n.number && (a = l(document).data().i18n.number);
            var e = 0;
            .001 < Math.abs(t - Math.floor(t)) && (e = 2);
            var i = t, s = isNaN(Math.abs(e)) ? 2 : e, n = a.decimalSeparator, r = a.groupingSeparator, e = parseInt(i = Math.abs(+i || 0).toFixed(s), 10) + "", a = 3 < (a = e.length) ? a % 3 : 0;
            return (t < 0 ? "-" : "") + (a ? e.substr(0, a) + r : "") + e.substr(a).replace(/(\d{3})(?=\d)/g, "$1" + r) + (s ? n + Math.abs(i - e).toFixed(s).slice(2) : "");
        },
        integer: function(t) {
            if ("" === t || !t || isNaN(t)) return t;
            var a = {
                format: "#,##0.###",
                groupingSeparator: ",",
                decimalSeparator: "."
            };
            "undefined" != typeof i18n && i18n.number ? a = i18n.number : l(document).data().i18n && l(document).data().i18n.number && (a = l(document).data().i18n.number);
            Math.abs(t - Math.floor(t));
            a.decimalSeparator;
            var e = a.groupingSeparator, i = parseInt(Math.abs(+t || 0).toFixed(0), 10) + "", a = 3 < (a = i.length) ? a % 3 : 0;
            return (t < 0 ? "-" : "") + (a ? i.substr(0, a) + e : "") + i.substr(a).replace(/(\d{3})(?=\d)/g, "$1" + e);
        },
        getDecimal: function(t) {
            return "" === num ? 0 : Number(t);
        },
        getVunit: function(t) {
            return "" === num ? 0 : Number(t);
        },
        percent: function(t) {
            return "" === t || !t || isNaN(t) ? t : l.jsFormControls.Format.decimal(100 * t);
        },
        getPercent: function(t) {
            return t && "" !== t ? (-1 !== t.indexOf("%") && (t = t.substring(0, t.length - 1)), 
            Number(t) / 100) : 0;
        },
        currency: function(t, a, e, i, s) {
            if (!(e = l.jsFormControls.Format._getValue(t, a, e, i))) {
                if (a) return "&#160;";
                e = 0;
            }
            i = l.jsFormControls.Format.decimal(e), a = null, e = null;
            return "undefined" != typeof i18n ? i18n.currency && (a = i18n.currency.prefix, 
            e = i18n.currency.suffix) : l(document).data().i18n && l(document).data().i18n.number && l(document).data().i18n.currency && (a = l(document).data().i18n.currency.prefix, 
            e = l(document).data().i18n.currency.suffix), a && (i = a + i), e && (i += e), i;
        },
        dateTime: function(t, a, e, i, s) {
            return (e = l.jsFormControls.Format._getValue(t, a, e, i)) ? this.date(e) + " " + this.time(e) : a ? "&#160;" : "";
        },
        date: function(t, a, e, i, s) {
            if (!(e = l.jsFormControls.Format._getValue(t, a, e, i)) || "" === e) return a ? "&#160;" : "";
            if (isNaN(e)) return e;
            i = new Date();
            i.setTime(e);
            a = i.getYear();
            a < 1900 && (a += 1900);
            e = null;
            return "undefined" != typeof i18n ? e = i18n.date : l(document).data().i18n && l(document).data().i18n.date && (e = l(document).data().i18n.date), 
            l.format ? l.format.date(i, e.shortDateFormat) : this._pad(i.getDate()) + "." + this._pad(i.getMonth() + 1) + "." + this._pad(a);
        },
        time: function(t, a, e, i, s) {
            if (!(e = l.jsFormControls.Format._getValue(t, a, e, i)) || "" === e) return a ? "&#160;" : "";
            if (isNaN(e)) return e;
            a = new Date();
            a.setTime(e);
            e = "HH:mm";
            return "undefined" != typeof i18n ? i18n.timeFormat ? e = i18n.timeFormat : i18n.date && i18n.date.timeFormat && (e = i18n.date.timeFormat) : l(document).data().i18n && void 0 !== l(document).data().i18n.timeFormat && (e = l(document).data().i18n.timeFormat), 
            l.format ? l.format.date(a, e) : this._pad(a.getHours()) + ":" + this._pad(a.getMinutes());
        },
        timespan: function(t, a, e, i, s) {
            for (var n = (e = (e = l.jsFormControls.Format._getValue(t, a, e, i)) || "0").split(":"), r = 0; r < n.length; r++) {
                var o = Number(n[r]);
                o && "NaN" !== o || (o = 0), n[r] = this._pad(o);
            }
            return n.length <= 0 ? "0:00" : 1 == n.length ? "0:" + this._pad(Math.floor(n[0])) : 2 == n.length ? Math.floor(n[0]) + ":" + this._pad(Math.floor(n[1])) : Math.floor(n[0]) + ":" + this._pad(Math.floor(n[1])) + ":" + pad(Math.floor(n[2]));
        },
        humanTime: function(t, a, e, i, s) {
            if (e = l.jsFormControls.Format._getValue(t, a, e, i), isNaN(e)) return e && 0 !== e.length ? e : "-";
            var n = Math.floor(e / 36e5);
            e -= 36e5 * n;
            t = Math.floor(e / 6e4);
            e -= 6e4 * t;
            a = Math.floor(e / 1e3);
            e -= 1e3 * a;
            i = "";
            return 0 < n && (i += n + "h ", e = a = 0), 0 < t && (i += t + "m ", e = 0), 0 < a && (i += a + "s ", 
            e = 0), 0 < e && (i += e + "ms"), i.trim();
        },
        getHumanTime: function(t) {
            if (!t || "" === t) return 0;
            for (var a = 0, e = "", i = "", s = function() {
                if ("" !== e) {
                    var t = Number(e);
                    switch (i) {
                      case "ms":
                      case "mill":
                        a += t;
                        break;

                      case "s":
                      case "secs":
                        a += 1e3 * t;
                        break;

                      case "":
                      case "m":
                      case "min":
                      case "minute":
                        a += 6e4 * t;
                        break;

                      case "h":
                      case "hour":
                        a += 36e5 * t;
                        break;

                      case "d":
                      case "day":
                      case "days":
                        a += 24 * t * 36e5;
                    }
                    e = i = "";
                }
            }, n = 0; n < t.length; n++) {
                var r = t.charAt(n);
                switch (r) {
                  case "0":
                  case "1":
                  case "2":
                  case "3":
                  case "4":
                  case "5":
                  case "6":
                  case "7":
                  case "8":
                  case "9":
                    "" !== i && s(), e += r;
                    break;

                  case "m":
                  case "i":
                  case "n":
                  case "s":
                  case "h":
                  case "o":
                  case "u":
                  case "r":
                  case "a":
                  case "e":
                  case "c":
                  case "y":
                  case "d":
                    i += r;
                }
            }
            return s(), a;
        }
    };
}(jQuery, window), String.prototype.trim = function() {
    return this.replace(/^\s+|\s+$/g, "");
}, String.prototype.startsWith = function(t) {
    return !(null === this || this.length <= 0) && (!(null === t || "null" == t || t.length <= 0) && this.substr(0, t.length) == t);
}, String.prototype.startsWithIgnoreCase = function(t) {
    return !(null === this || this.length <= 0) && (!(null === t || "null" == t || t.length <= 0) && this.substr(0, t.length).toLowerCase() == t.toLowerCase());
}, String.prototype.endsWith = function(t) {
    return !(null === this || this.length <= 0) && (!(null === t || "null" == t || t.length <= 0 || t.length > this.length) && this.substr(this.length - t.length) == t);
};